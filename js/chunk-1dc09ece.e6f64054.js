(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dc09ece"],{"0832":function(t,e,a){"use strict";a("f67c")},"09dd":function(t,e,a){},1440:function(t,e,a){},"22dd":function(t,e,a){"use strict";var r=a("18dc"),i=a("c34b"),s=a("5c1a"),o=URLSearchParams.prototype,l=i(o.forEach);r&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return l(this,(function(){t++})),t},configurable:!0,enumerable:!0})},"25b3":function(t,e,a){"use strict";a("1440")},2658:function(t,e,a){"use strict";a("777d")},"31c1":function(t,e,a){},3307:function(t,e,a){"use strict";a("ecff")},"3a3c":function(t,e,a){"use strict";var r=a("fef8"),i=r("toStringTag"),s={};s[i]="z",t.exports="[object z]"===String(s)},"3f52":function(t,e,a){"use strict";a("4add")},"3f85":function(t,e,a){"use strict";var r=a("3a3c"),i=a("535e"),s=a("7d6f"),o=a("fef8"),l=o("toStringTag"),n=Object,c="Arguments"===s(function(){return arguments}()),d=function(t,e){try{return t[e]}catch(a){}};t.exports=r?s:function(t){var e,a,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(a=d(e=n(t),l))?a:c?s(e):"Object"===(r=s(e))&&i(e.callee)?"Arguments":r}},"4add":function(t,e,a){},"4bad":function(t,e,a){"use strict";a("95c5")},"4f5c":function(t,e,a){},5109:function(t,e,a){"use strict";a("e8dc")},"5c1a":function(t,e,a){"use strict";var r=a("b79b"),i=a("6b00");t.exports=function(t,e,a){return a.get&&r(a.get,e,{getter:!0}),a.set&&r(a.set,e,{setter:!0}),i.f(t,e,a)}},"67e5":function(t,e,a){"use strict";a("83d6")},6908:function(t,e,a){"use strict";a("4f5c")},"6c6c":function(t,e,a){"use strict";a("c04a")},"777d":function(t,e,a){},"7c44":function(t,e,a){"use strict";a("b656")},"7c6b":function(t,e,a){"use strict";a("a266")},"83d6":function(t,e,a){},8409:function(t,e,a){"use strict";a("09dd")},"84fa":function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"threeAssetPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"flowId",label:"流水号"}}),e("el-table-column",{attrs:{prop:"bizName",label:"类型"}}),e("el-table-column",{attrs:{prop:"amount",label:"发生额"}}),e("el-table-column",{attrs:{prop:"balance",label:"资金余额"}}),e("el-table-column",{attrs:{prop:"occurTime",label:"发生时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormate")(e.row.occurTime))+" ")]}}])})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},i=[],s=a("7736"),o={props:["time","isSearch","marketId"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},TradeListSum:{bsFlag:"",closePl:0,commodityCode:"",commodityId:0,commodityName:"",createTime:0,fee:0,firmId:0,holdDetailId:0,margin:0,ocFlag:"",orderId:0,quantity:0,singlePrice:0,tqTip:0,tradeDay:0,tradeId:0,tradeType:0,updateTime:0,stampFee:0},isNetWrong:!1,beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},computed:{...Object(s["b"])(["sessionInfoGetter","commodityParamListGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},loadData(){this.pageData.currentPage=1,this.pageData.pageSize=20,this.showData()},showData(){const t=this;let e=protocol.queryFirmAccountFundsFlow;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryFirmAccountFundsFlowH,e.param.starTime=this.time[0],e.param.endTime=this.time[1]),e.param.page=this.pageData.currentPage-1,e.param.size=this.pageData.pageSize,e.param.sort=[{direction:"DESC",property:"flowId"}],http.postFrontChange(e,this.marketId).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.tableData=e}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?3!==e?7!==e?8!==e?10!==e?11!==e?12!==e?"":r.TradeListSum.fee:r.TradeListSum.stampFee:r.TradeListSum.closePl:r.TradeListSum.funds:r.TradeListSum.quantity:"共"+this.pageData.total+"条":"合计"}),a},directionClass(t,e,a,r){return 4==t.columnIndex?this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor"):5==t.columnIndex?this.setStrClass(t.row.ocFlag,"转让","dropColor","increaseColor"):void 0},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},l=o,n=(a("de72"),a("829d")),c=Object(n["a"])(l,r,i,!1,null,"dbb5b476",null);e["a"]=c.exports},"8fcc":function(t,e,a){"use strict";a("c217")},"940c":function(t,e,a){},"943f":function(t,e,a){"use strict";a("b2fa")},"95c5":function(t,e,a){},9684:function(t,e,a){t.exports=a.p+"img/no_data.5fa34f6c.png"},a23d:function(t,e,a){},a266:function(t,e,a){},a3cf:function(t,e,a){"use strict";var r=TypeError;t.exports=function(t,e){if(t<e)throw new r("Not enough arguments");return t}},a3d5:function(t,e,a){"use strict";a("a23d")},a3dc:function(t,e,a){"use strict";a("b428")},a499:function(t,e,a){"use strict";a("31c1")},a583:function(t,e,a){"use strict";a("caae")},a9e1:function(t,e,a){"use strict";a("ec41")},ab11:function(t,e,a){"use strict";var r=a("af28"),i=a("c34b"),s=a("ecd1"),o=a("a3cf"),l=URLSearchParams,n=l.prototype,c=i(n.append),d=i(n["delete"]),h=i(n.forEach),p=i([].push),m=new l("a=1&a=2&b=3");m["delete"]("a",1),m["delete"]("b",void 0),m+""!=="a=2"&&r(n,"delete",(function(t){var e=arguments.length,a=e<2?void 0:arguments[1];if(e&&void 0===a)return d(this,t);var r=[];h(this,(function(t,e){p(r,{key:e,value:t})})),o(e,1);var i,l=s(t),n=s(a),m=0,u=0,g=!1,b=r.length;while(m<b)i=r[m++],g||i.key===l?(g=!0,d(this,i.key)):u++;while(u<b)i=r[u++],i.key===l&&i.value===n||c(this,i.key,i.value)}),{enumerable:!0,unsafe:!0})},ad0f:function(t,e,a){"use strict";var r=a("af28"),i=a("c34b"),s=a("ecd1"),o=a("a3cf"),l=URLSearchParams,n=l.prototype,c=i(n.getAll),d=i(n.has),h=new l("a=1");!h.has("a",2)&&h.has("a",void 0)||r(n,"has",(function(t){var e=arguments.length,a=e<2?void 0:arguments[1];if(e&&void 0===a)return d(this,t);var r=c(this,t);o(e,1);var i=s(a),l=0;while(l<r.length)if(r[l++]===i)return!0;return!1}),{enumerable:!0,unsafe:!0})},b1fa:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"reportPage"}},[e("div",{staticClass:"headerWrap"},[e("div",{staticClass:"oneTit"},[t._v("报表系统")]),t._l(t.tabList,(function(a,r){return e("div",{key:r,class:r==t.tabIndex?"active1":"",on:{click:function(e){return t.changOneTab(r)}}},[t._v(" "+t._s(a.name)+" ")])}))],2),e("div",{staticClass:"chooseWrap"},[e("div",{staticClass:"itemSearch"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyyMMdd","default-time":["00:00:00","23:59:59"],clearable:!1,disabled:t.isDjs},on:{blur:t.judgeTime},model:{value:t.search.time,callback:function(e){t.$set(t.search,"time",e)},expression:"search.time"}})],1),e("div",{staticClass:"itemSearch"},[e("el-radio-group",{on:{change:t.changeRadio},model:{value:t.search.radio,callback:function(e){t.$set(t.search,"radio",e)},expression:"search.radio"}},t._l(t.radioList,(function(a,r){return e("el-radio",{key:r,attrs:{disabled:t.isDjs||0==t.tabIndex&&(2==t.twoTabIndex||3==t.twoTabIndex),label:a.label}},[t._v(t._s(a.name))])})),1)],1),e("div",{staticClass:"itemSearch actionSearch"},[e("el-button",{staticStyle:{width:"75px",height:"32px",background:"#EF5557","border-color":"#EF5557"},attrs:{plain:"",size:"small",disabled:t.isDjs},on:{click:t.searchData}},[t._v("查询")]),e("el-button",{staticStyle:{width:"75px",height:"32px",background:"#23FF02","border-color":"#23FF02"},attrs:{disabled:t.isDjs,size:"small"},on:{click:t.restData}},[t._v("重置")]),e("export-excel",{staticClass:"exportButton",attrs:{"table-ref":t.tableData,"search-form":t.searchForm,"protocol-name":t.protocolName,"file-name":t.fileName,"is-djus":t.isLast}})],1)]),0==t.tabIndex?e("div",{staticClass:"orderWrap"},[e("div",{staticClass:"twoTabList"},t._l(t.twoTabList,(function(a,r){return e("div",{key:r,staticClass:"twoItem",class:t.twoTabIndex==a.id?"twoActive":"",on:{click:function(e){return t.openReport(a.id)}}},[t._v(t._s(a.name))])})),0),e("div",{staticClass:"twoTabContent"},[0==t.twoTabIndex?e("orderTabFirst",{ref:"aa",attrs:{time:t.search.time,"is-search":t.isSearch}}):t._e(),1==t.twoTabIndex?e("orderTabTwo",{ref:"bb",attrs:{time:t.search.time,"is-search":t.isSearch}}):t._e(),2==t.twoTabIndex?e("orderTabThree",{ref:"cc"}):t._e(),3==t.twoTabIndex?e("orderTabFour",{ref:"dd"}):t._e(),4==t.twoTabIndex?e("orderTabSix",{ref:"ff",attrs:{time:t.search.time,"is-search":t.isSearch}}):t._e(),6==t.twoTabIndex?e("TradeDueToDelivery",{ref:"gg",attrs:{time:t.search.time,"is-search":t.isSearch}}):t._e(),7==t.twoTabIndex?e("MyDeliveryTheQuery",{ref:"hh"}):t._e(),8==t.twoTabIndex?e("DeilveryHis",{ref:"kk",attrs:{time:t.search.time,"is-search":t.isSearch}}):t._e()],1)]):1==t.tabIndex?e("div",{staticClass:"orderWrap"},[e("div",{staticClass:"twoTabList"},t._l(t.treeTabList,(function(a){return e("div",{key:a.marketId,staticClass:"twoItem",class:t.treeTabIndex==a.marketId?"twoActive":"",on:{click:function(e){return t.openThreeReport(a)}}},[t._v(t._s(a.accountName)+"流水")])})),0),e("div",{staticClass:"twoTabContent"},[e("threeAsset",{ref:"zjf",attrs:{"market-id":t.treeTabIndex,time:t.search.time,"is-search":t.isSearch}})],1)]):e("div",{staticClass:"orderWrap"},[e("div",{staticClass:"twoTabList"},t._l(t.fourTabList,(function(a,r){return e("div",{key:r,staticClass:"twoItem",class:t.fourTabIndex==a.id?"twoActive":"",on:{click:function(e){return t.openDeilverReport(a.id)}}},[t._v(t._s(a.name))])})),0),e("div",{staticClass:"twoTabContent"},[0==t.fourTabIndex?e("SelectGoods",{ref:"faa"}):t._e(),1==t.fourTabIndex?e("ShopGoods",{ref:"fbb"}):t._e(),t._v(" "),2==t.fourTabIndex?e("MyShopGoods",{ref:"fcc"}):t._e(),t._v(" "),3==t.fourTabIndex?e("MachQuery",{ref:"fdd"}):t._e()],1)])])])},i=[],s=(a("5384"),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"fistTabPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"400px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"orderId",label:"委托单号","min-width":"100"}}),e("el-table-column",{attrs:{prop:"commodityCode",label:"商品代码","min-width":"120"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"135"}}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖",sortable:"custom","min-width":"80"}}),e("el-table-column",{attrs:{prop:"orderType",label:"订立/转让",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("tradeTypeFormat")(e.row.orderType))+" ")]}}])}),e("el-table-column",{attrs:{prop:"singlePrice",label:"委托价格",sortable:"custom","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc fr"},[t._v(t._s(Number(a.row.singlePrice).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"initQuantity",label:"委托数量",sortable:"custom","min-width":"105"}}),e("el-table-column",{attrs:{prop:"quantity",label:"未挂牌数量","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr green-row fw"},[t._v(" "+t._s(a.row.quantity))])]}}])}),e("el-table-column",{attrs:{prop:"availableQuantity",label:"已挂牌数量","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr red-row fw"},[t._v(" "+t._s(t.util.floatSub(a.row.initQuantity,a.row.quantity)))])]}}])}),e("el-table-column",{attrs:{prop:"orderStatus",label:"状态","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc"},[t._v(" "+t._s(a.row.orderStatus))])]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"委托时间","min-width":"165"}}),e("el-table-column",{attrs:{prop:"cancelDealTime",label:"撤单时间","min-width":"165"}})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])}),o=[],l=a("7736"),n={props:["time","isSearch"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},OrderFrontSum:{availableQuantity:null,bsFlag:"",cancelDealTime:null,commodityCode:"",commodityId:0,commodityName:"",createTime:null,firmId:0,frozeFee:null,frozeMargin:null,holdDetailId:0,initQuantity:0,minPriceChange:0,ocFlag:"",orderId:0,orderStatus:0,orderType:0,priceScale:0,quantity:null,singlePrice:0,tradeDay:0,unDealQuantity:null,unitNumeral:0,updateTime:null},isNetWrong:!1,beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;let e=protocol.queryUserEntrustsNew;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryUserEntrustHSNEW,e.data.startTradeDay=this.time[0],e.data.endTradeDay=this.time[1]),e.data.page=this.pageData.currentPage-1,e.data.size=""+this.pageData.pageSize,e.data.bsFlag=null,e.data.commodityId=null,e.data.orderStatus=null,http.gPostHs(e).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime"),t.cancelDealTime&&e.modifyTime(t,"cancelDealTime"),e.modifyData(t,"bsFlag","B","买入","卖出"),e.modifyData(t,"ocFlag","O","订立","转让");const a=["已委托","已挂牌","已撤单","部分挂牌","部分挂牌后撤单"];a.forEach((a,r)=>{e.modifyData(t,"orderStatus",r+1,a)})})),this.tableData=t},sortChange(t,e,a){let r=protocol.queryUserEntrustsNew;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(r=protocol.queryUserEntrustHSNEW),"ascending"==t.order?(r.data.sort=[{direction:"ASC",property:""}],this.eachSortChange(t.column.property)):"descending"==t.order?(r.data.sort=[{direction:"DESC",property:""}],this.eachSortChange(t.column.property)):r.data.sort=[{direction:"DESC",property:"order_id"}],t.column&&http.gPostHs(r).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}})},eachSortChange(t){let e=protocol.queryUserEntrustsNew;return this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryUserEntrustHSNEW),e.data.sort[0].property=t},querySum(){this.time?(protocol.queryOrderFrontHSum.data.startTradeDay=this.time[0],protocol.queryOrderFrontHSum.data.endTradeDay=this.time[1]):(protocol.queryOrderFrontHSum.data.startTradeDay=null,protocol.queryOrderFrontHSum.data.endTradeDay=null),protocol.queryOrderFrontHSum.data.bsFlag=null,protocol.queryOrderFrontHSum.data.commodityId=null,http.gPostHs(protocol.queryOrderFrontHSum).then(t=>{t.data&&(t.data&&"0"==t.data.code?this.OrderFrontSum=t.data.value:this.$message(t.data.message))})},directionClass(t,e,a,r){switch(t.columnIndex){case 3:return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor");case 4:return this.setStrClass(t.row.ocFlag,"转让","dropColor","increaseColor");default:break}},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?2!==e?6!==e?7!==e?8!==e?"":r.OrderFrontSum.frozeMargin:r.OrderFrontSum.unDealQuantity:r.OrderFrontSum.quantity:"共"+this.pageData.total+"条":"合计"}),a},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},c=n,d=(a("7c44"),a("829d")),h=Object(d["a"])(c,s,o,!1,null,"2e9b0e65",null),p=h.exports,m=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"twoTabPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"400px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"tradeId",label:"挂牌单号","min-width":"100"}}),e("el-table-column",{attrs:{prop:"orderId",label:"委托单号","min-width":"100"}}),e("el-table-column",{attrs:{prop:"createTime",label:"挂牌时间","min-width":"165"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"135"}}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖",sortable:"custom","min-width":"80"}}),e("el-table-column",{attrs:{prop:"tradeType",label:"订立/转让","min-width":"105"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("tradeTypeFormat")(e.row.tradeType))+" ")]}}])}),e("el-table-column",{attrs:{prop:"tradePrice",label:"订立价格","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc fr"},[t._v(" "+t._s(Number(a.row.tradePrice).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:"挂牌数量","min-width":"105"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr fc"},[t._v(" "+t._s(a.row.quantity))])]}}])}),e("el-table-column",{attrs:{prop:"totalAmount",label:"挂牌金额","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr fc"},[t._v(" "+t._s(Number(a.row.totalAmount).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"cjjg",label:"转让价格","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr fc fw"},[t._v(" "+t._s("转让"==a.row.ocFlag?a.row.singlePrice:0))])]}}])}),e("el-table-column",{attrs:{prop:"closePl",label:"转让盈亏","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr fw",class:a.row.textColor},[t._v(" "+t._s(t.util.floatAdd(a.row.closePl,a.row.holdClosePl)))])]}}])}),e("el-table-column",{attrs:{prop:"fee",label:"购销手续费","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr fc fw"},[t._v(" "+t._s(a.row.fee))])]}}])}),e("el-table-column",{attrs:{prop:"cjType",label:"挂牌类型","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc"},[t._v(" 正常购销")])]}}])})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},u=[],g={props:["time","isSearch"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},TradeListSum:{bsFlag:"",cjType:"",cjje:null,cjjg:null,closePl:null,commodityCode:"",commodityId:null,commodityName:"",createTime:null,fee:null,firmId:null,holdDetailId:null,margin:null,minPriceChange:null,ocFlag:"",orderId:null,priceScale:null,quantity:null,singlePrice:null,stampFee:null,stampFeeRate:null,tqTip:null,tradeDay:null,tradeId:null,tradeType:null,updateTime:null},isNetWrong:!1,beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;let e=protocol.queryUserClinchesNew;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryUserClinchHSNew,e.data.startTradeDay=this.time[0],e.data.endTradeDay=this.time[1]),e.data.page=this.pageData.currentPage-1,e.data.size=""+this.pageData.pageSize,e.data.bsFlag=null,e.data.commodityId=null,e.data.tradeType=[1,2,4,8,15,16],http.gPostHs(e).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?3!==e?7!==e?8!==e?10!==e?11!==e?12!==e?"":r.TradeListSum.fee.toFixed(2):r.TradeListSum.stampFee.toFixed(2):this.util.floatAdd(r.TradeListSum.closePl,r.TradeListSum.holdClosePl):r.TradeListSum.funds.toFixed(2):r.TradeListSum.quantity:"共"+this.pageData.total+"条":"合计"}),a},querySum(){this.time?(protocol.queryTradeFrontHSum.data.startTradeDay=this.time[0],protocol.queryTradeFrontHSum.data.endTradeDay=this.time[1]):(protocol.queryTradeFrontHSum.data.startTradeDay=null,protocol.queryTradeFrontHSum.data.endTradeDay=null),protocol.queryTradeFrontHSum.data.bsFlag=null,protocol.queryTradeFrontHSum.data.commodityId=null,protocol.queryTradeFrontHSum.data.tradeType=[1,2,4,8,15,16],http.gPostHs(protocol.queryTradeFrontHSum).then(t=>{t.data&&(t.data&&"0"==t.data.code?this.TradeListSum=t.data.value:this.$message(t.data.message))})},threeTxtColor(t){return isNaN(t)?"":t>0?"red-row":t<0?"green-row":"white-row"},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime"),e.modifyData(t,"bsFlag","B","买入","卖出"),e.modifyData(t,"ocFlag","O","订立","转让");const a=["已委托","已挂牌","已撤单","部分挂牌","部分挂牌后撤单"];a.forEach((a,r)=>{e.modifyData(t,"orderStatus",r+1,a)}),t.textColor=e.threeTxtColor(Number(t.closePl))})),this.tableData=t},sortChange(t,e,a){let r=protocol.queryUserClinchesNew;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(r=protocol.queryUserClinchHSNew),"ascending"==t.order?(r.data.sort=[{direction:"ASC",property:""}],this.eachSortChange(t.column.property)):"descending"==t.order?(r.data.sort=[{direction:"DESC",property:""}],this.eachSortChange(t.column.property)):r.data.sort=[{direction:"DESC",property:"tradeId"}],t.column&&http.gPostHs(r).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}})},eachSortChange(t){let e=protocol.queryUserClinchesNew;return this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryUserClinchHSNew),e.data.sort[0].property=t},directionClass(t,e,a,r){switch(t.columnIndex){case 4:return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor");case 5:return this.setStrClass(t.row.ocFlag,"转让","dropColor","increaseColor");default:break}},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},b=g,f=(a("a3d5"),Object(d["a"])(b,m,u,!1,null,"16e9ad8e",null)),y=f.exports,D=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"threeTabPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"400px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"commodityCode",label:"商品代码","min-width":"120"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"135"}}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖",sortable:"custom","min-width":"80"}}),e("el-table-column",{attrs:{prop:"initAvgPrice",label:"订立均价",sortable:"custom","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:"买入"==a.row.bsFlag?"red-row":"green-row"},[t._v(" "+t._s(a.row.initAvgPrice))])]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:"存货数量","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc fr"},[t._v(" "+t._s(a.row.quantity))])]}}])}),e("el-table-column",{attrs:{prop:"frozeQuantity",label:"委托冻结数量","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr"},[t._v(" "+t._s(a.row.frozeQuantity))])]}}])}),e("el-table-column",{attrs:{prop:"holdMargin",label:"订货金额","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"yellow-row"},[t._v(" "+t._s(a.row.holdMargin))])]}}])}),e("el-table-column",{attrs:{prop:"holdPl",label:"货值变化","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:a.row.textColor},[t._v(" "+t._s(a.row.holdPl))])]}}])}),e("el-table-column",{attrs:{prop:"currentHoldPl",label:"实时货值变化","min-width":"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:a.row.textSColor},[t._v(" "+t._s(a.row.currentHoldPl))])]}}])})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},S=[],w={data(){return{tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},timer:null,oOrderPrice:"",thsTableWidth:{action:142},HoldFrontSum:{avgPrice:0,bsFlag:"",commodityCode:"",commodityId:0,commodityName:"",createTime:0,firmId:0,floatPl:0,holdId:0,holdMargin:0,quantity:0,totalPrice:0,frozeQuantity:0,ddQuantity:0,tqTransferQuantity:0,transferQuantity:0,unitNumeral:0,updateTime:0},dataArr:"",zrTitle:"转让",dialogFormVisible:!1,transfer:{price:"",quantity:""},oOrderData:{takeProfitPointPriceShow:"",stopLossPointPriceShow:""},dialogVisible:!1,isNetWrong:!1}},computed:{...Object(l["b"])(["h_holdTime","sessionInfoGetter","marketDetails","commodityStrategyGetter","h_sumClosePl","marketStatusGetter","marketStatusInNewTopline"])},watch:{h_holdTime(){this.showData()},marketDetails:{handler(t,e){this.showData()},deep:!0}},mounted(){this.showData()},beforeDestroy(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;protocol.queryUserPositionSummariesNew.data.page=this.pageData.currentPage-1,protocol.queryUserPositionSummariesNew.data.size=""+this.pageData.pageSize,protocol.queryUserPositionSummariesNew.data.firmId=this.sessionInfoGetter.firmId,protocol.queryUserPositionSummariesNew.data.commodityId=null,http.gPost(protocol.queryUserPositionSummariesNew).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.dataArr=JSON.stringify(t.data.value.content),this.judgeDataType(e),this.HoldFrontSum=t.data.value.sumData}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},threeTxtColor(t){return isNaN(t)?"":t>0?"red-row":t<0?"green-row":""},judgeDataType(t){const e=this;this.each(t,(function(t){t.floatPL=0,t.floatSsPL=0,t.textColor="",t.textSColor="",t.priceColor="",e.marketDetails.forEach(a=>{if(a.symbolId==t.commodityId){var r=a.averagePrice.toFixed(e.coinSmallDigital(a).coinDigitalNum);return"E"===e.marketStatusGetter.status||"C"===e.marketStatusGetter.status?t.currentHoldPl=t.hholdPl.toFixed(e.coinSmallDigital(a).coinDigitalNum):t.currentHoldPl="B"===t.bsFlag?(util.floatSub(a.close,t.avgPrice)*t.quantity*a.unitNumeral+t.hholdPl).toFixed(e.coinSmallDigital(a).coinDigitalNum):(util.floatSub(t.avgPrice,a.close)*t.quantity*a.unitNumeral+t.hholdPl).toFixed(e.coinSmallDigital(a).coinDigitalNum),r=0==r?a.close.toFixed(e.coinSmallDigital(a).coinDigitalNum):r,void(t.holdPl="B"===t.bsFlag?(util.floatSub(r,t.initAvgPrice)*t.quantity*a.unitNumeral).toFixed(e.coinSmallDigital(a).coinDigitalNum):(util.floatSub(t.initAvgPrice,r)*t.quantity*a.unitNumeral).toFixed(e.coinSmallDigital(a).coinDigitalNum))}}),t.textColor=e.threeTxtColor(Number(t.holdPl)),t.textSColor=e.threeTxtColor(Number(t.currentHoldPl)),e.modifyTime(t,"createTime"),e.modifyData(t,"bsFlag","B","买入","卖出"),e.modifyData(t,"ocFlag","O","订立","转让");const a=["已委托","已挂牌","已撤单","部分挂牌","部分挂牌后撤单"];a.forEach((a,r)=>{e.modifyData(t,"orderStatus",r+1,a)})})),this.tableData=t},coinSmallDigital(t){const e=t.minPriceChange,a=t.minAmountChange;let r=-Math.round(Math.log(e)/Math.log(10)),i=-Math.round(Math.log(a)/Math.log(10));return r<=0&&(r=0),i<=0&&(i=0),{numStr:new RegExp("^(\\d+)\\.(\\d{0,"+r+"}).*$"),coinDigitalNum:r,quantityNum:i,quantityStr:new RegExp("^(\\d+)\\.(\\d{0,"+i+"}).*$")}},sortChange(t,e,a){"ascending"==t.order?(protocol.queryUserPositionSummariesNew.data.sort[0].direction="ASC",this.eachSortChange(t.column.property)):"descending"==t.order?(protocol.queryUserPositionSummariesNew.data.sort[0].direction="DESC",this.eachSortChange(t.column.property)):protocol.queryUserPositionSummariesNew.data.sort=[{direction:"DESC",property:"holdId"}],protocol.queryUserPositionSummariesNew.data.firmId=this.sessionInfoGetter.firmId,protocol.queryUserPositionSummariesNew.data.commodityId=null,t.column&&http.gPost(protocol.queryUserPositionSummariesNew).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e),this.HoldFrontSum=t.data.value.sumData}})},eachSortChange(t){return protocol.queryUserPositionSummariesNew.data.sort[0].property=t},directionClass(t,e,a,r){switch(t.columnIndex){case 2:return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor");default:break}},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?1!==e?6!==e?7!==e&&8!==e?9!==e?10!==e?11!==e?"":r.h_sumClosePl:r.HoldFrontSum.holdMargin:r.HoldFrontSum.totalPrice:r.HoldFrontSum.ddQuantity:r.HoldFrontSum.frozeQuantity:"共"+r.pageData.total+"条":"合计"}),a},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},T=w,v=(a("67e5"),Object(d["a"])(T,D,S,!1,null,"69641ffd",null)),C=v.exports,_=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"fourTabPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"400px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"holdDetailId",label:"持单单号",width:"80"}}),e("el-table-column",{attrs:{prop:"commodityCode",label:"商品代码","min-width":"120"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称","min-width":"135"}}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖",sortable:"","min-width":"80"}}),e("el-table-column",{attrs:{prop:"initPrice",label:"订立价格",sortable:"","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:"买入"==a.row.bsFlag?"red-row":"green-row"},[t._v(" "+t._s(Number(a.row.initPrice).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"stopProfitPrice",label:"止盈价",sortable:"","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:"买入"==a.row.bsFlag?"red-row":"green-row"},[t._v(t._s(Number(a.row.stopProfitPrice).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"stopLossPrice",label:"止损价",sortable:"","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fr",class:"买入"==a.row.bsFlag?"red-row":"green-row"},[t._v(t._s(Number(a.row.stopLossPrice).toFixed(a.row.priceScale)))])]}}])}),e("el-table-column",{attrs:{prop:"initQuantity",label:"订立数量",sortable:"","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fw fc fr"},[t._v(" "+t._s(a.row.initQuantity))])]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:"存货数量","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"yellow-row fr"},[t._v(" "+t._s(a.row.quantity))])]}}])}),e("el-table-column",{attrs:{prop:"frozeQuantity",label:"冻结数量","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"yellow-row fr"},[t._v(" "+t._s(a.row.frozeQuantity))])]}}])}),e("el-table-column",{attrs:{prop:"holdMargin",label:"存货订金",sortable:"","min-width":"110"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",{staticClass:"fr"},[t._v(" "+t._s(a.row.holdMargin))])]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"订立时间",width:"165"}})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},x=[],N={components:{},data(){return{isSpotS:!1,tableData:[],currentBtn:1,pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},timer:null,oOrderPrice:"",thsTableWidth:{action:142},dataArr:"",isNetWrong:!1,ttpTableWidth:{openTime:180,currencyName:110,direction:80},HoldDetailListSum:{availableQuantity:null,bsFlag:null,commodityCode:null,commodityId:null,commodityName:null,createTime:null,dqTime:null,firmId:null,frozeQuantity:0,holdDay:null,holdDetailId:null,margin:0,pickupStartTime:null,quantity:0,remainDay:null,singlePrice:null,tradeDay:null,tradeId:null,tradeSinglePrice:null,tradeTime:null,unitNumeral:null,updateTime:null,sumClosePl:0}}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter","marketDetails"])},watch:{},mounted(){this.showData()},beforeDestroy(){this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{openSpotDialog(t){this.$refs.buyHold.showDialog(t)},reload(){this.recursionShowData()},handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;protocol.queryUserHoldingsSubsidiariesNew.data.page=this.pageData.currentPage-1,protocol.queryUserHoldingsSubsidiariesNew.data.size=""+this.pageData.pageSize,protocol.queryUserHoldingsSubsidiariesNew.data.bsFlag=null,protocol.queryUserHoldingsSubsidiariesNew.data.commodityId=null,http.gPost(protocol.queryUserHoldingsSubsidiariesNew).then(t=>{if(0!=t.data.code?(this.isNetWrong=!0,this.$message({message:t.data.message})):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.dataArr=JSON.stringify(t.data.value.content),this.judgeDataType(e),this.HoldDetailListSum=t.data.value.sumData}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},threeTxtColor(t){return isNaN(t)?"":t>0?"red-row":t<0?"green-row":""},judgeDataType(t){const e=this;this.each(t,(function(t){t.floatPL=0,t.textColor="",t.textColor=e.threeTxtColor(Number(t.holdPl));const a=24*t.pickupStartTime*60*60*1e3,r=util.floatAdd(t.createTime,a);t.pickupStartTime=util.dateDayFormate(Number(r)),e.modifyTime(t,"createTime"),e.modifyTime(t,"tradeTime"),e.modifyData(t,"bsFlag","B","买入","卖出");const i=["已委托","已挂牌","已撤单","部分挂牌","部分挂牌后撤单"];i.forEach((a,r)=>{e.modifyData(t,"orderStatus",r+1,a)})})),this.tableData=t},sortChange(t,e,a){"ascending"==t.order?(protocol.queryUserHoldingsSubsidiariesNew.data.sort[0].direction="ASC",this.eachSortChange(t.column.property)):"descending"==t.order?(protocol.queryUserHoldingsSubsidiariesNew.data.sort[0].direction="DESC",this.eachSortChange(t.column.property)):protocol.queryUserHoldingsSubsidiariesNew.data.sort=[{direction:"DESC",property:"holdDetailId"}],protocol.queryUserHoldingsSubsidiariesNew.data.firmId=this.sessionInfoGetter.firmId,protocol.queryUserHoldingsSubsidiariesNew.data.commodityId=null,t.column&&http.gPost(protocol.queryUserHoldingsSubsidiariesNew).then(t=>{if(0!=t.data.code?(this.isNetWrong=!0,this.$message({message:t.data.message})):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e),this.HoldDetailListSum=t.data.value.sumData}})},eachSortChange(t){return protocol.queryUserHoldingsSubsidiariesNew.data.sort[0].property=t},recursionShowData(){this.showData()},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?8!==e&&9!==e?10!==e?11!==e?"":r.HoldDetailListSum.margin:r.HoldDetailListSum.ddQuantity:r.HoldDetailListSum.quantity:"合计"}),a},directionClass(t,e,a,r){if(3==t.columnIndex)return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor")},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},F=N,k=(a("3f52"),a("a499"),Object(d["a"])(F,_,x,!1,null,"5c4bf9ad",null)),I=k.exports,P=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"sixTabPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"400px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"tradeDay",label:"购销日期","min-width":"100"}}),e("el-table-column",{attrs:{prop:"balanceQc",label:"期初余额","min-width":"120"}}),e("el-table-column",{attrs:{prop:"amountTransferIn",label:"划入资金","min-width":"80"}}),e("el-table-column",{attrs:{prop:"amountTransferOut",label:"划出资金","min-width":"80"}}),e("el-table-column",{attrs:{prop:"handselCurr",label:"当日订金","min-width":"100"}}),e("el-table-column",{attrs:{prop:"tradeFee",label:"当日购销手续费","min-width":"120"}}),e("el-table-column",{attrs:{prop:"tradeProfit",label:"当日转让盈亏","min-width":"110"}}),e("el-table-column",{attrs:{prop:"balanceQm",label:"当前余额",width:"155"}}),e("el-table-column",{attrs:{prop:"equityQm",label:"期末权益",width:"155"}}),e("el-table-column",{attrs:{prop:"amountAdditional",label:"需追加资金",width:"155"}})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},z=[],q={props:["time","isSearch"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},TradeListSum:{bsFlag:"",closePl:0,commodityCode:"",commodityId:0,commodityName:"",createTime:0,fee:0,firmId:0,holdDetailId:0,margin:0,ocFlag:"",orderId:0,quantity:0,singlePrice:0,tqTip:0,tradeDay:0,tradeId:0,tradeType:0,updateTime:0,stampFee:0},isNetWrong:!1}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;protocol.param_findUserReportOrderMargin.data.page=this.pageData.currentPage-1,protocol.param_findUserReportOrderMargin.data.size=""+this.pageData.pageSize,protocol.param_findUserReportOrderMargin.data.startDate=this.time[0],protocol.param_findUserReportOrderMargin.data.endDate=this.time[1],protocol.param_findUserReportOrderMargin.data.sort=[{direction:"DESC",property:"trade_day"}],http.gPost(protocol.param_findUserReportOrderMargin).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},judgeDataType(t){this.tableData=t},sortChange(t,e,a){"ascending"==t.order?protocol.queryUserClinches.data.sort[0].direction="ASC":protocol.queryUserClinches.data.sort[0].direction="DESC",t.column&&(this.eachSortChange(t.column.property),http.gPost(protocol.queryUserClinches).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e),this.TradeListSum=t.data.value.sumData}}))},eachSortChange(t){return protocol.queryUserClinches.data.sort[0].property=t},getSummaries(t){const{columns:e}=t,a=[],r=this;return e.forEach((t,e)=>{a[e]=0!==e?3!==e?7!==e?8!==e?10!==e?11!==e?12!==e?"":r.TradeListSum.fee:r.TradeListSum.stampFee:r.TradeListSum.closePl:r.TradeListSum.funds:r.TradeListSum.quantity:"共"+this.pageData.total+"条":"合计"}),a},directionClass(t,e,a,r){return 4==t.columnIndex?this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor"):5==t.columnIndex?this.setStrClass(t.row.ocFlag,"转让","dropColor","increaseColor"):void 0},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},E=q,L=(a("4bad"),Object(d["a"])(E,P,z,!1,null,"238628ea",null)),$=L.exports,j=a("84fa"),W=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"MyTradeDueToDelivery"}},[e("el-table",{ref:"tableData",attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"createTime",label:"时间",width:"160px"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("span",[t._v(t._s(t._f("dateFormate")(a.row.createTime)))])]}}])}),e("el-table-column",{attrs:{prop:"expiredId",label:"配对单号"}}),e("el-table-column",{attrs:{prop:"sellStatus",label:"卖方状态"}}),e("el-table-column",{attrs:{prop:"buyStatus",label:"买方状态"}}),e("el-table-column",{attrs:{prop:"deliveryStatus",label:"交收状态"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称",width:"110px"}}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖"},scopedSlots:t._u([{key:"default",fn:function(a){return["B"==a.row.bsFlag?e("span",{staticClass:"increaseColor"},[t._v("买")]):t._e(),"S"==a.row.bsFlag?e("span",{staticClass:"dropColor"},[t._v("卖")]):t._e()]}}])}),e("el-table-column",{attrs:{prop:"waitDayNum",label:"验货天数"}}),e("el-table-column",{attrs:{prop:"quantity",label:"交收数量"}}),e("el-table-column",{attrs:{prop:"weight",label:"交收重量"}}),e("el-table-column",{attrs:{prop:"deliveryPrice",label:"交收价格"}}),e("el-table-column",{attrs:{prop:"holdMargin",label:"交收担保金",width:"100px"}}),e("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return["B"==a.row.bsFlag&&"正常"==a.row.buyStatus&&"正常"==a.row.sellStatus&&"待确认"==a.row.deliveryStatus?e("el-button",{attrs:{size:"mini"},on:{click:function(e){return t.showDia(a.row)}}},[t._v("验货确认")]):t._e()]}}])})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e(),e("el-dialog",{staticClass:"newPopup",attrs:{visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v("您确定要验货确认吗？")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{staticClass:"canclexBtn",on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{staticClass:"surexBtn",attrs:{type:"primary"},on:{click:t.gettingData}},[t._v("确 定")])],1)])],1)},G=[],O={name:"TradeDueToDelivery",props:["time","isSearch"],data(){return{row:{},dialogVisible:!1,dialogVisible1:!1,isNetWrong:!1,tableData:[],pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:20,currentPage:1},beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{showDia(t){this.row={},this.row=t,this.dialogVisible=!0},gettingData(){protocol.param_buyCloseDeliveryConfirm.data.expiredId=this.row.expiredId,http.gPost(protocol.param_buyCloseDeliveryConfirm).then(t=>{const{code:e,message:a}=t.data;0===Number(e)?(this.$message({message:a}),this.dialogVisible=!1,this.row={},setTimeout(()=>{this.showData()},1e3)):(this.dialogVisible=!0,this.$message({message:a}))}).catch(t=>{})},showDia1(t){this.row={},this.row=t,this.dialogVisible1=!0},gettingData1(){protocol.param_buyCloseDeliveryConfirm.data.expiredId=this.row.expiredId,http.gPost(protocol.param_buyCloseDeliveryConfirm).then(t=>{const{code:e,message:a}=t.data;0===Number(e)?(this.$message({message:a}),this.dialogVisible1=!1,this.row={},this.showData()):(this.dialogVisible1=!0,this.$message({message:a}))}).catch(t=>{})},handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){this.time[0]!=this.beginTime[0]||this.time[1]!=this.beginTime[1]?(protocol.param_getExpireTradeList.data.startTradeDay=this.time[0],protocol.param_getExpireTradeList.data.endTradeDay=this.time[1]):(protocol.param_getExpireTradeList.data.startTradeDay=null,protocol.param_getExpireTradeList.data.endTradeDay=null),protocol.param_getExpireTradeList.data.page=this.pageData.currentPage-1,protocol.param_getExpireTradeList.data.size=""+this.pageData.pageSize,protocol.param_getExpireTradeList.data.sort=[{direction:"DESC",property:"createTime"}],http.gPost(protocol.param_getExpireTradeList).then(t=>{const{code:e,message:a,value:r}=t.data;0===Number(e)?(this.tableData=r.content,this.pageData.total=r.totalElements):this.$message({message:a})}).catch(t=>{})}}},H=O,Q=(a("a9e1"),a("8409"),a("a583"),Object(d["a"])(H,W,G,!1,null,"4727c272",null)),M=Q.exports,A=function(){var t=this,e=t._self._c;return e("div",[e("el-button",{staticClass:"export-btn",attrs:{type:"primary",disabled:t.isDjus},on:{click:function(e){return t.exportExcel()}}},[t._v("导出Excel")]),e("el-dialog",{attrs:{"append-to-body":"",title:"选择您要导出的条目",visible:t.dialogShowType},on:{"update:visible":function(e){t.dialogShowType=e},closed:t.closeDialog}},[e("el-form",{ref:"reportForm",attrs:{model:t.reportForm}},[e("el-form-item",{attrs:{prop:"checkboxGroup"}},[e("div",{staticStyle:{margin:"0px 0px 15px 10px"}},[e("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("全选")])],1),e("el-checkbox-group",{on:{change:t.handleCheckedCitiesChange},model:{value:t.reportForm.checkboxGroup,callback:function(e){t.$set(t.reportForm,"checkboxGroup",e)},expression:"reportForm.checkboxGroup"}},t._l(t.formDataList,(function(a){return e("el-checkbox",{key:a.cn,staticClass:"checkbox-button-export-border",attrs:{id:"export-info",label:a,border:""}},[t._v(t._s(a.cn))])})),1)],1),e("el-form-item",{staticStyle:{color:"#c0c4cc"},attrs:{align:"center"}},[t._v("提示:直接点击确定导出全部已搜索数据")]),e("el-form-item",{attrs:{align:"center"}},[e("el-button",{staticClass:"calcesBtn",on:{click:function(e){t.dialogShowType=!1}}},[t._v("取消")]),e("el-button",{staticClass:"suresBtn",attrs:{type:"primary",loading:t.buttonLoading},on:{click:function(e){return t.formOut()}}},[t._v("确定")])],1)],1)],1)],1)},U=[],R=(a("ab11"),a("ad0f"),a("22dd"),{components:{},props:{tableRef:{type:Object,default:function(){return{}}},protocolName:{type:String,default:""},searchForm:{type:Object,default:function(){return{}}},fileName:{type:String,default:"导出表格.xls"},isDjus:{type:Boolean,default:!1}},data(){return{reportForm:{checkboxGroup:[]},formDataList:[],dialogShowType:!1,buttonLoading:!1,isIndeterminate:!1,checkAll:!1}},computed:{formDataListCnName:function(){const t=[];return this.formDataList.forEach(e=>{t.push(e.cn)}),t}},mounted(){},methods:{exportExcel(){const t=[];for(const e in this.tableRef.columns){if("index"===this.tableRef.columns[e].type)continue;if("selection"===this.tableRef.columns[e].type)continue;if("expand"===this.tableRef.columns[e].type)continue;if("exportExcept"===this.tableRef.columns[e].className)continue;const a={cn:this.tableRef.columns[e].label,en:this.tableRef.columns[e].property};t.push(a)}for(const e in this.searchForm)protocol[this.protocolName].param[e]=this.searchForm[e];this.formDataList=t,this.reportForm.checkboxGroup=this.formDataList,this.isIndeterminate=!1,this.checkAll=!0,this.dialogShowType=!0},handleCheckAllChange(t){this.reportForm.checkboxGroup=t?this.formDataList:[],this.isIndeterminate=!1},handleCheckedCitiesChange(t){const e=t.length;this.checkAll=e===this.formDataList.length,this.isIndeterminate=e>0&&e<this.formDataList.length},formOut(t){let e="",a="";if(0!==this.reportForm.checkboxGroup.length){this.buttonLoading=!0;for(var r=0;r<this.reportForm.checkboxGroup.length;r++)e=e+this.reportForm.checkboxGroup[r].cn+",",a=a+this.reportForm.checkboxGroup[r].en+",";e=e.substring(0,e.length-1),a=a.substring(0,a.length-1),protocol[this.protocolName].param.cn=e,protocol[this.protocolName].param.en=a,http.postReport(protocol[this.protocolName]).then(t=>{var e=new Blob([t.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8"}),a=document.createElement("a"),r=window.URL.createObjectURL(e);a.href=r,a.download=this.fileName,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r),this.dialogShowType=!1})}else this.$message({type:"warning",message:"请至少选择一列"})},closeDialog(){this.dialogShowType=!1,this.buttonLoading=!1}}}),V=R,B=(a("8fcc"),Object(d["a"])(V,A,U,!1,null,"0ad1deb9",null)),J=B.exports,Y=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"MyTradeEntrustTheQuery"}},[e("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"deliveryId",label:"交收单号",width:"120"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称"}}),e("el-table-column",{attrs:{prop:"deliveryQuantity",label:"交收数量"}}),e("el-table-column",{attrs:{prop:"deliveryWeight",label:"交收重量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(parseFloat(e.row.deliveryWeight))+t._s(e.row.unitQuantifier)+" ")]}}])}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖"}}),e("el-table-column",{attrs:{prop:"deliveryPrice",label:"交收价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.deliveryPrice)+" ")]}}])}),e("el-table-column",{attrs:{prop:"deliveryFee",label:"交收服务费"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("toThousands")(Number(e.row.deliveryFee)))+" ")]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"申请时间",width:"150"}}),e("el-table-column",{attrs:{prop:"deliveryStatus",label:"交收状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("deliveryStatusFormat")(e.row.deliveryStatus))+" ")]}}])}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return["W"==a.row.deliveryStatus&&"T"==a.row.deliveryType?e("div",[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.revoke(a.row)}}},[t._v("撤单")])],1):t._e()]}}])})],2),e("el-dialog",{attrs:{title:"撤单",visible:t.dialogVisible,width:"30%","before-close":t.revokeOrder},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v("您确定要撤单吗?")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.revokeConfirm}},[t._v("确认")])],1)]),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)},Z=[],K=a("1065"),X=new K["default"],tt={name:"MyTradeEntrustTheQuery",filters:{deliveryTypeFormat(t){switch(t){case"5":return"协议交收";case"6":return"提前交收";case"7":return"到期交收";case"M":return"强制交收";case"T":return"现货购销交收";default:return"未知"}},deliveryStatusFormat(t){switch(t){case"W":return"待审核";case"T":return"审核通过";case"F":return"审核拒绝";case"C":return"交收完成";case"U":return"已撤销";default:return"未知"}}},props:["flag","page"],data(){return{isNetWrong:!1,tableData:[],dialogVisible:!1,pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:10,currentPage:1},sOrderId:""}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{flag(){protocol.param_getDeliveryList.data.bsFlag=this.flag,this.showData()}},created(){X.$on("refreshData",()=>{this.showData()})},mounted(){this.showData()},methods:{selectCommodityStrategy(t){for(const e of this.commodityStrategyGetter)if(t==e.commodityId)return e;return{canBuy:"--",canDqDelivery:"--",canSell:"--",canShow:"--",canTqDelivery:"--",canTqTransfer:"--",canTransfer:"--",commodityCode:"--",commodityId:null,commodityName:"--",feeStrategyId:"--",guidePrice:"--",holdStrategyId:"--",margin:"--",marginStrategyId:"--",marginType:"--",marketPrice:"--",maxHoldAmount:"--",maxSingleTradeAmount:"--",maxUpDownWidth:"--",minAmountChange:.01,minPickupAmount:"--",minPriceChange:.01,minSingleTradeAmount:"--",offerEndTime:0,openFee:"--",openFeeType:"--",pickupCountdown:"--",pickupStandard:"--",pickupStartTime:0,tradeStrategyId:"--",transferFee:"--",transferFeeType:"--",unitNumeral:"--",unitQuantifier:"--"}},coinSmallDigital(t){const e=t.minPriceChange,a=t.minAmountChange;let r=-Math.round(Math.log(e)/Math.log(10)),i=-Math.round(Math.log(a)/Math.log(10));return r<=0&&(r=0),i<=0&&(i=0),{numStr:new RegExp("^(\\-)*(\\d+)\\.(\\d{0,"+r+"}).*$"),coinDigitalNum:r,quantityNum:i,quantityStr:new RegExp("^(\\-)*(\\d+)\\.(\\d{0,"+i+"}).*$")}},revokeOrder(t){this.$confirm("确认关闭？").then(e=>{t()}).catch(t=>{})},handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){protocol.param_getDeliveryList.data.firmId=this.sessionInfoGetter.firmId,protocol.param_getDeliveryList.data.page=this.pageData.currentPage-1,protocol.param_getDeliveryList.data.size=""+this.pageData.pageSize,protocol.param_getDeliveryList.data.deliveryStatus=null,http.gPost(protocol.param_getDeliveryList).then(t=>{if(t.data)if(t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}else this.$message(t.data.message)})},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime"),e.modifyData(t,"bsFlag","B","买入","卖出")})),this.tableData=t},revoke(t){this.dialogVisible=!0,this.sOrderId=t.deliveryId},revokeConfirm(){protocol.param_auditFirmDelivery.data.deliveryId=this.sOrderId,http.gPost(protocol.param_auditFirmDelivery).then(t=>{t.data&&(this.$message(t.data.message),t.data&&"0"==t.data.code&&this.showData())}),this.dialogVisible=!1},sortChange(t,e,a){"ascending"==t.order?protocol.param_getDeliveryList.data.sort[0].direction="ASC":protocol.param_getDeliveryList.data.sort[0].direction="DESC",protocol.param_getDeliveryList.data.firmId=this.sessionInfoGetter.firmId,t.column&&(this.eachSortChange(t.column.property),http.gPost(protocol.param_getDeliveryList).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}))},eachSortChange(t){return protocol.param_getDeliveryList.data.sort[0].property=t},directionClass(t,e,a,r){if(4==t.columnIndex)return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor")}}},et=tt,at=(a("a3dc"),a("0832"),a("6c6c"),Object(d["a"])(et,Y,Z,!1,null,"7fb33224",null)),rt=at.exports,it=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"DeilveryHis"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"},"cell-class-name":t.directionClass},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"deliveryId",label:"交收单号",width:"120"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"商品名称"}}),e("el-table-column",{attrs:{prop:"deliveryQuantity",label:"交收数量"}}),e("el-table-column",{attrs:{prop:"weight",label:"交收重量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.weight)+" ")]}}])}),e("el-table-column",{attrs:{prop:"bsFlag",label:"买/卖"}}),e("el-table-column",{attrs:{prop:"deliveryPrice",label:"交收价格"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.deliveryPrice)+" ")]}}])}),e("el-table-column",{attrs:{prop:"deliveryClosePl",label:"交收盈亏"}}),e("el-table-column",{attrs:{prop:"deliveryFee",label:"交收服务费"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("toThousands")(Number(e.row.deliveryFee)))+" ")]}}])}),e("el-table-column",{attrs:{prop:"deliveryStatus",label:"交收状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("deliveryStatusFormat")(e.row.deliveryStatus))+" ")]}}])}),e("el-table-column",{attrs:{prop:"createTime",label:"交收时间",width:"150"}})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},st=[],ot={props:["time","isSearch"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},TradeListSum:{bsFlag:"",cjType:"",cjje:null,cjjg:null,closePl:null,commodityCode:"",commodityId:null,commodityName:"",createTime:null,fee:null,firmId:null,holdDetailId:null,margin:null,minPriceChange:null,ocFlag:"",orderId:null,priceScale:null,quantity:null,singlePrice:null,stampFee:null,stampFeeRate:null,tqTip:null,tradeDay:null,tradeId:null,tradeType:null,updateTime:null},isNetWrong:!1,beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},filters:{deliveryTypeFormat(t){switch(t){case"5":return"协议交收";case"6":return"提前交收";case"7":return"到期交收";case"M":return"强制交收";case"T":return"现货购销交收";default:return"未知"}},deliveryStatusFormat(t){switch(t){case"W":return"待审核";case"T":return"审核通过";case"F":return"审核拒绝";case"C":return"交收完成";case"U":return"已撤销";default:return"未知"}}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;let e=protocol.param_getDeliveryList;this.time[0]!=this.beginTime[0]||this.time[1]!=this.beginTime[1]?(e=protocol.param_getDeliveryListH,e.data.startTime=this.time[0],e.data.endTime=this.time[1],e.data.page=this.pageData.currentPage):(e.data.startTime=null,e.data.endTime=null,e.data.page=this.pageData.currentPage-1),e.data.size=""+this.pageData.pageSize,http.gPostHs(e).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code)if(this.time[0]!=this.beginTime[0]||this.time[1]!=this.beginTime[1]){this.pageData.total=t.data.value.total;const e=t.data.value.list;this.judgeDataType(e)}else{this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},threeTxtColor(t){return isNaN(t)?"":t>0?"red-row":t<0?"green-row":"white-row"},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime"),e.modifyData(t,"bsFlag","B","买入","卖出"),e.modifyData(t,"ocFlag","O","订立","转让");const a=["已委托","已挂牌","已撤单","部分挂牌","部分挂牌后撤单"];a.forEach((a,r)=>{e.modifyData(t,"orderStatus",r+1,a)}),t.textColor=e.threeTxtColor(Number(t.closePl))})),this.tableData=t},sortChange(t,e,a){let r=protocol.param_getDeliveryList;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(r=protocol.param_getDeliveryListH),"ascending"==t.order?r.data.sort[0].direction="ASC":r.data.sort[0].direction="DESC",t.column&&(this.eachSortChange(t.column.property),http.gPostHs(r).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}))},eachSortChange(t){let e=protocol.queryUserClinches;return this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryUserClinchHS),e.data.sort[0].property=t},directionClass(t,e,a,r){switch(t.columnIndex){case 4:return this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor");default:break}},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},lt=ot,nt=(a("7c6b"),a("25b3"),a("c4cb"),Object(d["a"])(lt,it,st,!1,null,"444a295f",null)),ct=nt.exports,dt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"SelectGoods"}},[e("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"购销品种"}}),e("el-table-column",{attrs:{prop:"storageName",label:"仓库名称"}}),e("el-table-column",{attrs:{prop:"quantity",label:"铺货数量"}}),e("el-table-column",{attrs:{prop:"",label:"总重量"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.weight)+" ")]}}])}),e("el-table-column",{attrs:{prop:"sellQuantity",label:"可选数量"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[Number(a.row.sellQuantity)>0?e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.revoke(a.row)}}},[t._v("选货")])],1):t._e()]}}])})],2),e("el-dialog",{attrs:{title:"选货",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-row",{staticClass:"zr_dialog_input"},[e("el-col",{attrs:{span:6}},[e("div",{staticStyle:{"line-height":"40px"}},[t._v("商品")])]),e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{disabled:"",placeholder:"选中商品"},model:{value:t.transfer.commodityName,callback:function(e){t.$set(t.transfer,"commodityName",e)},expression:"transfer.commodityName"}})],1)],1),e("el-row",{staticClass:"zr_dialog_input"},[e("el-col",{attrs:{span:6}},[e("div",{staticStyle:{"line-height":"40px"}},[t._v("选货数量")])]),e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{type:"number",placeholder:"选货数量"},model:{value:t.transfer.quantity,callback:function(e){t.$set(t.transfer,"quantity",e)},expression:"transfer.quantity"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{disabled:t.zring},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{disabled:t.zring,type:"primary"},on:{click:t.revokeConfirm}},[t._v("确认")])],1)],1),t.pageData.total?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)},ht=[],pt={name:"SelectGoods",props:["flag","page"],data(){return{tableData:[],dialogVisible:!1,pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:10,currentPage:1},selectGood:null,transfer:{commodityName:"",quantity:""},zring:!1}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{flag(){protocol.param_getSelection.param.bsFlag=this.flag,this.showData()}},created(){X.$on("refreshData",()=>{this.showData()})},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){protocol.param_getSelection.param.page=this.pageData.currentPage-1,protocol.param_getSelection.param.size=""+this.pageData.pageSize,http.postFront1(protocol.param_getSelection).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}})},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime")})),this.tableData=t},revoke(t){this.dialogVisible=!0,this.selectGood=t,this.transfer.commodityName=t.commodityName},revokeConfirm(){const t=this;this.transfer.quantity<=0?this.$message("委托数量需大于0"):this.transfer.quantity>this.selectGood.sellQuantity?this.$message("委托数量超过可选数量"):this.zring||(this.zring=!0,this.transfer.quantity?(protocol.param_selectionGoods.param.commodityId=this.selectGood.commodityId,protocol.param_selectionGoods.param.quantity=this.transfer.quantity,protocol.param_selectionGoods.param.spreadGoodsId=this.selectGood.spreadGoodsId,http.postFront1(protocol.param_selectionGoods).then(e=>{if(this.zring=!1,e.data){const{code:a,message:r}=e.data;"0"==a?(this.$message("成功!"),this.transfer.commodityName="",this.transfer.quantity="",this.selectGood=null,this.dialogVisible=!1,setTimeout(()=>{t.showData()},window.g.Interface_latency_Time&&800)):(this.$message(r),this.transfer.commodityName="",this.transfer.quantity="",this.selectGood=null,this.dialogVisible=!1)}}).catch(()=>{this.zring=!1})):(this.zring=!1,this.$message("请填写选货数量")))},sortChange(t,e,a){"ascending"==t.order?protocol.param_getSelection.param.sort[0].direction="ASC":protocol.param_getSelection.param.sort[0].direction="DESC",t.column&&(this.eachSortChange(t.column.property),http.postFront1(protocol.param_getSelection).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}))},eachSortChange(t){return protocol.param_getSelection.param.sort[0].property=t}}},mt=pt,ut=(a("b46a"),Object(d["a"])(mt,dt,ht,!1,null,null,null)),gt=ut.exports,bt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"MachQuery"}},[e("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"购销品种"}}),e("el-table-column",{attrs:{prop:"buyName",label:"买方名称"}}),e("el-table-column",{attrs:{prop:"sellName",label:"卖方名称"}}),e("el-table-column",{attrs:{prop:"quantity",label:"配对数量"}}),e("el-table-column",{attrs:{prop:"storageName",label:"仓库名称"}}),e("el-table-column",{attrs:{prop:"createTime",label:"交收时间"},scopedSlots:t._u([{key:"default",fn:function(a){return[null!=a.row.createTime?e("div",[t._v(t._s(t._f("dateFormate")(a.row.createTime)))]):e("div",[t._v(t._s(a.row.createTime))])]}}])}),e("el-table-column",{attrs:{prop:"pairStatus",label:"配对状态"}})],2),t.pageData.total?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)},ft=[],yt={name:"MachQuery",props:["flag","page"],data(){return{tableData:[],dialogVisible:!1,pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:10,currentPage:1},selectGood:null,transfer:{commodityName:"",quantity:""},zring:!1}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{flag(){protocol.param_getPair.param.bsFlag=this.flag,this.showData()}},created(){X.$on("refreshData",()=>{this.showData()})},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,r=t.getDate();const i=`${e}/${a}/${r} 00:00:00`,s=`${e}/${a}/${r} 23:59:59`;protocol.param_getPair.param.startTime=new Date(i).getTime(),protocol.param_getPair.param.endTime=new Date(s).getTime(),protocol.param_getPair.param.page=this.pageData.currentPage-1,protocol.param_getPair.param.size=""+this.pageData.pageSize,protocol.param_getPair.param.sort=[{direction:"DESC",property:"createTime"}],http.postFront1(protocol.param_getPair).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.tableData=e}})},revoke(t){this.dialogVisible=!0,this.selectGood=t,this.transfer.commodityName=t.commodityName},revokeConfirm(){const t=this;this.transfer.quantity<=0?this.$message("委托数量需大于0"):(this.zring=!0,this.transfer.quantity?(protocol.param_spreadGoods.param.commodityId=this.selectGood.commodityId,protocol.param_spreadGoods.param.quantity=this.transfer.quantity,protocol.param_spreadGoods.param.storageId=this.selectGood.storageId,protocol.param_spreadGoods.param.warehouseId=this.selectGood.warehouseId,http.postFront1(protocol.param_spreadGoods).then(e=>{if(this.zring=!1,e.data){const{code:a,message:r}=e.data;"0"==a?(this.$message("成功!"),this.transfer.commodityName="",this.transfer.quantity="",this.selectGood=null,this.dialogVisible=!1,setTimeout(()=>{t.showData()},window.g.Interface_latency_Time&&800)):this.$message(r)}})):(this.zring=!1,this.$message("请填写铺货数量")))},sortChange(t,e,a){"ascending"==t.order?protocol.param_getPair.param.sort[0].direction="ASC":protocol.param_getPair.param.sort[0].direction="DESC",t.column&&(this.eachSortChange(t.column.property),http.postFront1(protocol.param_getPair).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.tableData=e}}))},eachSortChange(t){return protocol.param_getPair.param.sort[0].property=t}}},Dt=yt,St=(a("3307"),Object(d["a"])(Dt,bt,ft,!1,null,null,null)),wt=St.exports,Tt=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"MyShopGoods"}},[e("el-button",{attrs:{disabled:t.fastDisabled,type:"primary",plain:""},on:{click:t.fastClose}},[t._v("铺货撤销")]),e("el-table",{ref:"table",attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}},on:{"sort-change":t.sortChange,"selection-change":t.handleSelectionChange}},[e("el-table-column",{attrs:{type:"selection",width:"55",selectable:t.selectable}}),e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{type:"index",align:"center",label:"序号",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticStyle:{display:"flex","justify-content":"center"}},[t._v(" "+t._s(a.$index+1)+" ")])]}}])}),e("el-table-column",{attrs:{prop:"createTime",align:"center",label:"铺货时间"}}),e("el-table-column",{attrs:{prop:"commodityName",align:"center",label:"购销品种"}}),e("el-table-column",{attrs:{prop:"storageName",align:"center",label:"仓库名称"}}),e("el-table-column",{attrs:{prop:"quantity",align:"center",label:"铺货数量"}}),e("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return["Y"===a.row.isRevoke?e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.revoke(a.row)}}},[t._v("撤单")])],1):t._e()]}}])})],2),e("el-dialog",{attrs:{title:"撤单",visible:t.dialogVisible,width:"30%","before-close":t.revokeOrder},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v("您确定要撤单吗?")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.revokeConfirm}},[t._v("确认")])],1)]),e("el-dialog",{attrs:{title:"快捷撤单",visible:t.dialogVisible1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[e("span",[t._v("您确定要撤单吗?")]),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",disabled:t.fastClickNum>0},on:{click:t.fastCloseClick}},[t._v("确认")])],1)]),t.pageData.total?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)},vt=[],Ct={name:"MyShopGoods",props:["flag","page"],data(){return{isNetWrong:!1,tableData:[{}],dialogVisible:!1,pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:10,currentPage:1},sOrderId:"",tetqTableWidth:{bsFlag:80,orderPrice:100,orderQuantity:100,ocFlag:110,orderType:110,State:80,stopLossPrice:110},timer:null,multipleSelection:[],dialogVisible1:!1,fastClickNum:0,fastClickSuccessNum:0,fastClickErrorNum:0,OrderFrontSum:{bsFlag:"",commodityCode:"",commodityId:0,commodityName:"",createTime:0,firmId:0,frozeFee:0,frozeMargin:0,holdDetailId:0,ocFlag:"",orderId:0,orderStatus:0,orderType:0,quantity:0,singlePrice:0,tradeDay:0,unDealQuantity:0,unitNumeral:0,updateTime:0},typeValue:"",typeOptions:[{value:"1",label:"已委托"},{value:"2",label:"已挂牌"},{value:"3",label:"已撤单"},{value:"4",label:"部分挂牌"},{value:"5",label:"部分挂牌后撤单"}]}},computed:{...Object(l["b"])(["h_orderTime","sessionInfoGetter","commodityStrategyGetter"]),fastDisabled(){return!(this.multipleSelection.length>0)}},watch:{flag(){protocol.param_getSpreadQuery.param.bsFlag=this.flag,this.showData()},typeValue(){this.typeValue?protocol.param_getSpreadQuery.param.orderStatus=[this.typeValue]:protocol.param_getSpreadQuery.param.orderStatus=null,this.showData()},h_orderTime(){this.showData()}},created(){X.$on("refreshData",()=>{this.showData()})},beforeDestroy(){this.timer&&(clearInterval(this.timer),this.timer=null)},mounted(){this.showData()},methods:{selectable(t,e){return"Y"===t.isRevoke},fastCloseClick(){const t=this;t.fastClickNum=0;const e=[];for(const a of this.multipleSelection)"Y"===a.isRevoke&&(e.push(a.spreadGoodsId),t.fastClickNum++);t.fastClickNum>0&&(t.fastClickNum=0,this.multipleSelection=[],protocol.param_deleteBatchSpreadGoods.param.spreadGoodsIds=e,http.postFront1(protocol.param_deleteBatchSpreadGoods).then(e=>{e.data&&"0"==e.data.code?(setTimeout(()=>{t.showData()},window.g.Interface_latency_Time&&800),this.$message(e.data.message)):this.$message(e.data.message),this.dialogVisible1=!1}))},fastClose(){this.dialogVisible1=!0},handleSelectionChange(t){this.multipleSelection=t},toggleSelection(t){t?t.forEach(t=>{this.$refs.table.toggleRowSelection(t)}):this.$refs.table.clearSelection()},selectCommodityStrategy(t){for(const e of this.commodityStrategyGetter)if(t==e.commodityId)return e;return{canBuy:"--",canDqDelivery:"--",canSell:"--",canShow:"--",canTqDelivery:"--",canTqTransfer:"--",canTransfer:"--",commodityCode:"--",commodityId:null,commodityName:"--",feeStrategyId:"--",guidePrice:"--",holdStrategyId:"--",margin:"--",marginStrategyId:"--",marginType:"--",marketPrice:"--",maxHoldAmount:"--",maxSingleTradeAmount:"--",maxUpDownWidth:"--",minAmountChange:.01,minPickupAmount:"--",minPriceChange:.01,minSingleTradeAmount:"--",offerEndTime:0,openFee:"--",openFeeType:"--",pickupCountdown:"--",pickupStandard:"--",pickupStartTime:0,tradeStrategyId:"--",transferFee:"--",transferFeeType:"--",unitNumeral:"--",unitQuantifier:"--"}},coinSmallDigital(t){const e=t.minPriceChange,a=t.minAmountChange;let r=-Math.round(Math.log(e)/Math.log(10)),i=-Math.round(Math.log(a)/Math.log(10));return r<=0&&(r=0),i<=0&&(i=0),{numStr:new RegExp("^(\\-)*(\\d+)\\.(\\d{0,"+r+"}).*$"),coinDigitalNum:r,quantityNum:i,quantityStr:new RegExp("^(\\-)*(\\d+)\\.(\\d{0,"+i+"}).*$")}},revokeOrder(t){this.$confirm("确认撤单吗？").then(e=>{t()}).catch(t=>{})},handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){const t=this;protocol.param_getSpreadQuery.param.firmId=this.sessionInfoGetter.firmId,protocol.param_getSpreadQuery.param.page=this.pageData.currentPage-1,protocol.param_getSpreadQuery.param.size=""+this.pageData.pageSize,http.postFront1(protocol.param_getSpreadQuery).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime")}));const a=this.multipleSelection;this.tableData=t;const r=[];for(const i of a)for(const e of t)i.orderId===e.orderId&&r.push(e);setTimeout(()=>{e.toggleSelection(r)},0)},revoke(t){this.dialogVisible=!0,this.sOrderId=t.spreadGoodsId},revokeConfirm(){const t=this;protocol.param_deleteSpreadGoods.param.spreadGoodsId=this.sOrderId,http.postFront1(protocol.param_deleteSpreadGoods).then(e=>{e.data&&(this.$message(e.data.message),e.data&&"0"==e.data.code&&setTimeout(()=>{t.showData()},window.g.Interface_latency_Time&&800))}),this.dialogVisible=!1},sortChange(t,e,a){"ascending"==t.order?protocol.param_getSpreadQuery.param.sort[0].direction="ASC":protocol.param_getSpreadQuery.param.sort[0].direction="DESC",protocol.param_getSpreadQuery.param.firmId=this.sessionInfoGetter.firmId,t.column&&(this.eachSortChange(t.column.property),http.postFront1(protocol.param_getSpreadQuery).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e),this.OrderFrontSum=t.data.value.sumData}}))},eachSortChange(t){return protocol.param_getSpreadQuery.param.sort[0].property=t}}},_t=Ct,xt=(a("6908"),Object(d["a"])(_t,Tt,vt,!1,null,null,null)),Nt=xt.exports,Ft=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"SelectGoods"}},[e("el-table",{attrs:{data:t.tableData,"header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}},on:{"sort-change":t.sortChange}},[e("template",{slot:"empty"},[e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"100px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e("el-table-column",{attrs:{prop:"commodityName",label:"购销品种"}}),e("el-table-column",{attrs:{prop:"storageName",label:"仓库名称"}}),e("el-table-column",{attrs:{prop:"holdMargin",label:"占用履约订金"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("toThousands")(Number(e.row.holdMargin)))+" ")]}}])}),e("el-table-column",{attrs:{prop:"avgPrice",label:"持单价"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("toThousands1")(Number(e.row.avgPrice)))+" ")]}}])}),e("el-table-column",{attrs:{prop:"quantity",label:"可铺数量"}}),e("el-table-column",{attrs:{prop:"warehouseQuantity",label:"仓单总数量"}}),e("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.quantity>0?e("div",{staticStyle:{display:"flex","justify-content":"center"}},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.revoke(a.row)}}},[t._v("铺货")])],1):t._e()]}}])})],2),e("el-dialog",{attrs:{title:"铺货",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-row",{staticClass:"zr_dialog_input"},[e("el-col",{attrs:{span:6}},[e("div",{staticStyle:{"line-height":"40px"}},[t._v("商品")])]),e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{disabled:"",placeholder:"选中商品"},model:{value:t.transfer.commodityName,callback:function(e){t.$set(t.transfer,"commodityName",e)},expression:"transfer.commodityName"}})],1)],1),e("el-row",{staticClass:"zr_dialog_input"},[e("el-col",{attrs:{span:6}},[e("div",{staticStyle:{"line-height":"40px"}},[t._v("铺货数量")])]),e("el-col",{attrs:{span:18}},[e("el-input",{attrs:{type:"number",placeholder:"铺货数量"},model:{value:t.transfer.quantity,callback:function(e){t.$set(t.transfer,"quantity",e)},expression:"transfer.quantity"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{disabled:t.zring},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")]),e("el-button",{attrs:{type:"primary",disabled:t.zring},on:{click:t.revokeConfirm}},[t._v("确认")])],1)],1),t.pageData.total?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-pagination",{attrs:{"current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)},kt=[],It={name:"SelectGoods",props:["flag","page"],data(){return{tableData:[],dialogVisible:!1,pageData:{total:null,pageSizes:[5,10,20,30,40,50,60],pageSize:10,currentPage:1},selectGood:null,transfer:{commodityName:"",quantity:""},zring:!1}},computed:{...Object(l["b"])(["sessionInfoGetter","commodityStrategyGetter"])},watch:{flag(){protocol.param_getSpread.param.bsFlag=this.flag,this.showData()}},created(){X.$on("refreshData",()=>{this.showData()})},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},showData(){protocol.param_getSpread.param.page=this.pageData.currentPage-1,protocol.param_getSpread.param.size=""+this.pageData.pageSize,http.postFront1(protocol.param_getSpread).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}})},judgeDataType(t){const e=this;this.each(t,(function(t){e.modifyTime(t,"createTime")})),this.tableData=t},revoke(t){this.dialogVisible=!0,this.selectGood=t,this.transfer.commodityName=t.commodityName},revokeConfirm(){const t=this;this.transfer.quantity<=0?this.$message("委托数量需大于0"):this.zring||(this.zring=!0,this.transfer.quantity?(protocol.param_spreadGoods.param.commodityId=this.selectGood.commodityId,protocol.param_spreadGoods.param.quantity=this.transfer.quantity,protocol.param_spreadGoods.param.storageId=this.selectGood.storageId,protocol.param_spreadGoods.param.warehouseId=this.selectGood.warehouseId,http.postFront1(protocol.param_spreadGoods).then(e=>{if(this.zring=!1,e.data){const{code:a,message:r}=e.data;"0"==a?(this.$message("成功!"),this.transfer.commodityName="",this.transfer.quantity="",this.selectGood=null,this.dialogVisible=!1,setTimeout(()=>{t.showData()},window.g.Interface_latency_Time&&800)):(this.$message(r),this.transfer.commodityName="",this.transfer.quantity="",this.selectGood=null,this.dialogVisible=!1)}}).catch(()=>{this.zring=!1})):(this.zring=!1,this.$message("请填写铺货数量")))},sortChange(t,e,a){"ascending"==t.order?protocol.param_getSpread.param.sort[0].direction="ASC":protocol.param_getSpread.param.sort[0].direction="DESC",t.column&&(this.eachSortChange(t.column.property),http.postFront1(protocol.param_getSpread).then(t=>{if(t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.judgeDataType(e)}}))},eachSortChange(t){return protocol.param_getSpread.param.sort[0].property=t}}},Pt=It,zt=(a("2658"),Object(d["a"])(Pt,Ft,kt,!1,null,null,null)),qt=zt.exports,Et={components:{orderTabFirst:p,orderTabTwo:y,orderTabThree:C,orderTabFour:I,orderTabSix:$,threeAsset:j["a"],TradeDueToDelivery:M,exportExcel:J,MyDeliveryTheQuery:rt,DeilveryHis:ct,SelectGoods:gt,MachQuery:wt,MyShopGoods:Nt,ShopGoods:qt},data(){return{isLast:!1,isDjs:!1,tableData:{},protocolName:"param_tq_tradeQuery_exportOrderFront",fileName:"委托明细.xlsx",isSearch:!1,tabIndex:0,search:{time:null,radio:1},searchForm:{startTradeDay:null,endTradeDay:null,sort:[{direction:"DESC",property:"createTime"}]},exportTable:[],tabList:[{name:"订单报表"},{name:"资金报表"},{name:"铺货选货"}],twoTabList:[{name:"委托明细",id:0},{name:"挂牌明细",id:1},{name:"持单汇总",id:2},{name:"持单明细",id:3},{name:"资金状况",id:4},{name:"交收挂牌查询",id:8}],treeTabList:window.g.APP_market,treeTabIndex:0,twoTabIndex:0,isChangTab:!1,radioList:[{label:0,name:"当前"},{label:1,name:"上日"},{label:2,name:"上周"},{label:4,name:"上月"},{label:5,name:"本月"}],beginTimeT:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],beginZtime:[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)],currentDate:new Date,millisecond:864e5,fourTabIndex:0,fourTabList:[{name:"选货",id:0},{name:"铺货",id:1},{name:"铺货查询",id:2},{name:"配对查询",id:3}],reportTime:null}},watch:{isChangTab(t){t&&(this.isChangTab=!1,this.isDjs=!1,this.isLast=!1,this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),0==this.tabIndex?(sessionStorage.setItem("marketId_w",28),0==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.aa.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportOrderFront",this.fileName="委托明细.xlsx"},500):1==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.bb.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportTradeList",this.fileName="挂牌明细.xlsx"},500):2==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.cc.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"holdId"}],this.protocolName="param_tq_tradeQuery_exportHoldFront",this.fileName="持单汇总.xlsx"},500):3==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.dd.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportHoldDetailList",this.fileName="持单明细.xlsx"},500):4==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ee.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"tradeId"}],this.protocolName="param_tq_exportDeliveryStock",this.fileName="交收订货.xlsx"},500):5==this.twoTabIndex?(this.searchForm={startDate:this.search.time[0],endDate:this.search.time[1],sort:[{direction:"DESC",property:"trade_day"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ff.$refs.tableData,this.protocolName="param_tq_exportUserReportOrderMargin",this.fileName="资金状况.xlsx"},500)):6==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.gg.$refs.tableData,this.protocolName="param_exportDeliveryFrontH",this.fileName="到期交收.xlsx"},500):7==this.twoTabIndex?(this.isLast=!0,this.isDjs=!0):8==this.twoTabIndex?(this.isLast=!1,this.searchForm={startTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"deliveryId"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.kk.$refs.tableData,this.searchForm.startTime&&this.searchForm.endTime?this.protocolName="param_exportDeliveryFrontH":this.protocolName="param_getDeliveryExcel",this.fileName="交收挂牌.xlsx"},500)):(this.isDjs=!0,this.isLast=!0)):1==this.tabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.zjf.$refs.tableData,this.protocolName="param_tq_exportFirmAccountFundsFlow",sessionStorage.setItem("marketId_w",0),this.fileName="资金系统流水.xlsx"},500):(this.isLast=!0,this.isDjs=!0))}},created(){this.search.time=this.beginTimeT,this.search.radio=0},mounted(){this.tableData=this.$refs.aa.$refs.tableData,this.searchForm.startTradeDay=null,this.searchForm.endTradeDay=null},methods:{changOneTab(t){this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.tabIndex=t,this.isChangTab=!0,2==t&&(this.isLast=!0,this.isDjs=!0)},judgeTime(t){const e=this.formatTime(this.getLastWeek()),a=this.formatTime(this.getThisWeek()),r=this.formatTime(this.getLastMonth()),i=this.formatTime(this.getThisMonth()),s=t.value;this.beginTimeT[0]==s[0]&&this.beginTimeT[1]==s[1]?this.search.radio=0:this.beginZtime[0]==s[0]&&this.beginZtime[1]==s[1]?this.search.radio=1:e[0]==s[0]&&e[1]==s[1]?this.search.radio=2:a[0]==s[0]&&a[1]==s[1]?this.search.radio=3:r[0]==s[0]&&r[1]==s[1]?this.search.radio=4:i[0]==s[0]&&i[1]==s[1]?this.search.radio=5:this.search.radio=10},calcMoth(t,e){const a=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8),r=e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8),i=new Date(a).getTime(),s=new Date(r).getTime(),o=26784e5;return Number(i)-Number(s)>o},searchData(){if(7!==this.twoTabIndex){if(this.calcMoth(this.search.time[1],this.search.time[0]))return this.$message("查询时间不能大于1个月");0==this.tabIndex?this.searchForm={startTradeDay:0===this.search.radio?null:this.search.time[0],endTradeDay:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"createTime"}]}:this.searchForm={starTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"occurTime"}]},0===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportOrderFront":1===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportTradeList":2===this.twoTabIndex?(this.searchForm.sort=[{direction:"DESC",property:"holdId"}],this.protocolName="param_tq_tradeQuery_exportHoldFront"):3===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportHoldDetailList":5===this.twoTabIndex?(this.searchForm.sort=[{direction:"DESC",property:"tradeId"}],this.protocolName="param_tq_exportDeliveryStock"):4===this.twoTabIndex?(this.searchForm={startDate:this.search.time[0],endDate:this.search.time[1],sort:[{direction:"DESC",property:"trade_day"}]},this.protocolName="param_tq_exportUserReportOrderMargin"):8===this.twoTabIndex&&(this.isLast=!1,this.searchForm={startTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"deliveryId"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.kk.$refs.tableData,this.searchForm.startTime&&this.searchForm.endTime?this.protocolName="param_exportDeliveryFrontH":this.protocolName="param_getDeliveryExcel",this.fileName="交收挂牌.xlsx"},500)),0!=this.tabIndex&&(this.protocolName="param_tq_exportFirmAccountFundsFlow"),0!=this.tabIndex||0!=this.twoTabIndex||this.search.time[0]==this.beginTimeT[0]&&this.search.time[1]==this.beginTimeT[1]||(this.protocolName="param_tq_tradeQuery_exportOrderFrontH",this.searchForm={startTradeDay:0===this.search.radio?null:this.search.time[0],endTradeDay:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"create_time"}]}),0!=this.tabIndex||1!=this.twoTabIndex||this.search.time[0]==this.beginTimeT[0]&&this.search.time[1]==this.beginTimeT[1]||(this.protocolName="param_tq_tradeQuery_exportTradeFrontH",this.searchForm={startTradeDay:0===this.search.radio?null:this.search.time[0],endTradeDay:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"create_time"}]}),0==this.tabIndex||this.search.time[0]==this.beginTimeT[0]&&this.search.time[1]==this.beginTimeT[1]||(this.protocolName="param_tq_exportFirmAccountFundsFlowH"),this.isSearch=!0,setTimeout(()=>{this.isSearch=!1},1e3)}},restData(){this.search.time=this.beginTimeT,this.search.radio=0,this.isSearch=!1,this.isSearch=!0,setTimeout(()=>{this.isSearch=!1},1e3)},formatTime(t){const e=[];if(t.length>0)for(let a=0;a<t.length;a++){const r=t[a].replace(/-/g,"");e.push(r)}return e},getThisWeek:function(){var t=new Array,e=this.currentDate.getDay(),a=0!=e?e-1:6,r=new Date(this.currentDate.getTime()-a*this.millisecond);t.push(this.formatterDate(r));const i=util.dateDayFormate(Number(new Date));return t.push(i),t},getLastWeek:function(){var t=new Array,e=this.currentDate.getDay(),a=0!=e?e-1:6,r=new Date(this.currentDate.getTime()-this.millisecond*a),i=new Date(r.getTime()-this.millisecond),s=new Date(i.getTime()-6*this.millisecond);return t.push(this.formatterDate(s)),t.push(this.formatterDate(i)),t},getThisMonth:function(){var t=new Array,e=this.currentDate.getMonth(),a=this.currentDate.getFullYear(),r=new Date(a,e,1);11==e?(a++,e=0):e++;const i=util.dateDayFormate(Number(new Date));return t.push(this.formatterDate(r)),t.push(i),t},getLastMonth:function(){var t=new Array,e=this.currentDate.getMonth(),a=this.currentDate.getFullYear(),r=new Date(a,e,1);0==e?(e=11,a--):e--;var i=new Date(a,e,1),s=new Date(r.getTime()-this.millisecond);return t.push(this.formatterDate(i)),t.push(this.formatterDate(s)),t},formatterDate:function(t){var e=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate());return e},changeRadio(t){switch(t){case 0:this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))];break;case 1:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)];break;case 2:this.search.time=this.formatTime(this.getLastWeek());break;case 3:this.search.time=this.formatTime(this.getThisWeek());break;case 4:this.search.time=this.formatTime(this.getLastMonth());break;case 5:this.search.time=this.formatTime(this.getThisMonth());break;case 6:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)];break;default:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)]}},exportReport(){},openReport(t){this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.twoTabIndex=t,this.isDjs=!1,this.isLast=!1,this.searchForm={startTradeDay:0===this.search.radio?null:this.search.time[0],endTradeDay:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"createTime"}]},sessionStorage.setItem("marketId_w",28),this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),0==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.aa.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportOrderFront",this.fileName="委托明细.xlsx"},500):1==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.bb.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportTradeList",this.fileName="挂牌明细.xlsx"},500):2==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.cc.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"holdId"}],this.protocolName="param_tq_tradeQuery_exportHoldFront",this.fileName="持单汇总.xlsx"},500):3==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.dd.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportHoldDetailList",this.fileName="持单明细.xlsx"},500):5==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ee.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"tradeId"}],this.protocolName="param_tq_exportDeliveryStock",this.fileName="交收订货.xlsx"},500):4==t?(this.searchForm={startDate:this.search.time[0],endDate:this.search.time[1],sort:[{direction:"DESC",property:"trade_day"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ff.$refs.tableData,this.protocolName="param_tq_exportUserReportOrderMargin",this.fileName="资金状况.xlsx"},500)):6==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.gg.$refs.tableData,this.protocolName="param_exportDeliveryFrontH",this.fileName="到期交收.xlsx"},500):7==this.twoTabIndex?(this.isLast=!0,this.isDjs=!0):8==this.twoTabIndex?(this.isLast=!1,this.searchForm={startTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"deliveryId"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.kk.$refs.tableData,this.searchForm.startTime&&this.searchForm.endTime?this.protocolName="param_exportDeliveryFrontH":this.protocolName="param_getDeliveryExcel",this.fileName="交收挂牌.xlsx"},500)):this.isDjs=!0},openThreeReport(t){this.isDjs=!1,this.isLast=!1,this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.treeTabIndex=t.marketId,this.searchForm={starTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"occurTime"}]},this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),this.$nextTick(()=>[this.$refs.zjf.loadData()]),this.reportTime=setTimeout(()=>{this.tableData=this.$refs.zjf.$refs.tableData,this.protocolName="param_tq_exportFirmAccountFundsFlow",this.fileName=t.accountName+"流水.xlsx",sessionStorage.setItem("marketId_w",t.marketId)})},openDeilverReport(t){this.fourTabIndex=t,this.isLast=!0,this.isDjs=!0}}},Lt=Et,$t=(a("943f"),a("5109"),Object(d["a"])(Lt,r,i,!1,null,"6036bb5a",null));e["default"]=$t.exports},b2fa:function(t,e,a){},b428:function(t,e,a){},b46a:function(t,e,a){"use strict";a("940c")},b656:function(t,e,a){},c04a:function(t,e,a){},c217:function(t,e,a){},c4cb:function(t,e,a){"use strict";a("f945")},caae:function(t,e,a){},dcc9:function(t,e,a){},de72:function(t,e,a){"use strict";a("dcc9")},e8dc:function(t,e,a){},ec41:function(t,e,a){},ecd1:function(t,e,a){"use strict";var r=a("3f85"),i=String;t.exports=function(t){if("Symbol"===r(t))throw new TypeError("Cannot convert a Symbol value to a string");return i(t)}},ecff:function(t,e,a){},f67c:function(t,e,a){},f945:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1dc09ece.e6f64054.js.map