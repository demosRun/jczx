(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-269dc73c"],{"02a2":function(t,e,a){},"26e3":function(t,e,a){"use strict";a("3dc7")},"3dc7":function(t,e,a){},"71dc":function(t,e,a){"use strict";a("02a2")},"84fa":function(t,e,a){"use strict";var i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"threeAssetPage"}},[e("div",{staticClass:"orderTable"},[e("el-table",{ref:"tableData",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","header-cell-style":{background:"linear-gradient(180deg, rgba(36, 42, 67, 0.6) 0%, #2E3453 52%, rgba(48, 54, 82, 0.8) 100%)",borderRight:"1px solid #474747",padding:"5px 0px"}}},[e("template",{slot:"empty"},[t.isNetWrong?e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"},on:{click:t.showData}},[t._v("加载失败,点击重试")])]):e("div",{staticClass:"no-datas1"},[e("div",{staticClass:"no-data-img",staticStyle:{margin:"200px auto 0px",width:"100px",height:"100px"}},[e("img",{staticStyle:{width:"100%"},attrs:{src:a("9684"),alt:""}})]),e("div",{staticClass:"no-data",staticStyle:{"margin-top":"-15px !important","text-align":"center"}},[t._v("暂无数据")])])]),e("el-table-column",{attrs:{prop:"flowId",label:"流水号"}}),e("el-table-column",{attrs:{prop:"bizName",label:"类型"}}),e("el-table-column",{attrs:{prop:"amount",label:"发生额"}}),e("el-table-column",{attrs:{prop:"balance",label:"资金余额"}}),e("el-table-column",{attrs:{prop:"occurTime",label:"发生时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t._f("dateFormate")(e.row.occurTime))+" ")]}}])})],2),t.pageData.total?e("el-row",[e("el-col",{staticClass:"paginateWrap",attrs:{span:24}},[e("el-pagination",{attrs:{"popper-class":"_popStyle","current-page":t.pageData.currentPage,"page-sizes":t.pageData.pageSizes,"page-size":t.pageData.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pageData.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1):t._e()],1)])},r=[],s=a("7736"),o={props:["time","isSearch","marketId"],data(){return{checked:!1,tableData:[],pageData:{total:null,pageSizes:[10,20,30,40],pageSize:20,currentPage:1},tcdTableWidth:{bsFlag:80,ocFlag:110,closePl:100},TradeListSum:{bsFlag:"",closePl:0,commodityCode:"",commodityId:0,commodityName:"",createTime:0,fee:0,firmId:0,holdDetailId:0,margin:0,ocFlag:"",orderId:0,quantity:0,singlePrice:0,tqTip:0,tradeDay:0,tradeId:0,tradeType:0,updateTime:0,stampFee:0},isNetWrong:!1,beginTime:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))]}},computed:{...Object(s["b"])(["sessionInfoGetter","commodityParamListGetter","commodityStrategyGetter"])},watch:{isSearch(t){t&&(this.pageData.currentPage=1,this.showData())}},mounted(){this.showData()},methods:{handleSizeChange(t){this.pageData.pageSize=t,this.showData()},handleCurrentChange(t){this.pageData.currentPage=t,this.showData()},loadData(){this.pageData.currentPage=1,this.pageData.pageSize=20,this.showData()},showData(){const t=this;let e=protocol.queryFirmAccountFundsFlow;this.time[0]==this.beginTime[0]&&this.time[1]==this.beginTime[1]||(e=protocol.queryFirmAccountFundsFlowH,e.param.starTime=this.time[0],e.param.endTime=this.time[1]),e.param.page=this.pageData.currentPage-1,e.param.size=this.pageData.pageSize,e.param.sort=[{direction:"DESC",property:"flowId"}],http.postFrontChange(e,this.marketId).then(t=>{if(0!=t.data.code?(this.$message({message:t.data.message}),this.isNetWrong=!0):this.isNetWrong=!1,t.data&&t.data&&"0"==t.data.code){this.pageData.total=t.data.value.totalElements;const e=t.data.value.content;this.tableData=e}}).catch(e=>{setTimeout(()=>{t.showData()},1e3)})},getSummaries(t){const{columns:e}=t,a=[],i=this;return e.forEach((t,e)=>{a[e]=0!==e?3!==e?7!==e?8!==e?10!==e?11!==e?12!==e?"":i.TradeListSum.fee:i.TradeListSum.stampFee:i.TradeListSum.closePl:i.TradeListSum.funds:i.TradeListSum.quantity:"共"+this.pageData.total+"条":"合计"}),a},directionClass(t,e,a,i){return 4==t.columnIndex?this.setStrClass(t.row.bsFlag,"卖出","dropColor","increaseColor"):5==t.columnIndex?this.setStrClass(t.row.ocFlag,"转让","dropColor","increaseColor"):void 0},setLanguageCss(){switch(this.$i18n.locale=localStorage.lang||navigator.language.slice(-2).toLowerCase(),localStorage.lang){case"en":{const t={bsFlag:120,ocFlag:150,closePl:150};localStorage.setItem("tcdTableEnWidth",JSON.stringify(t)),this.tcdTableWidth=JSON.parse(localStorage.tcdTableEnWidth)}break;default:break}}}},h=o,n=(a("de72"),a("829d")),l=Object(n["a"])(h,i,r,!1,null,"dbb5b476",null);e["a"]=l.exports},9684:function(t,e,a){t.exports=a.p+"img/no_data.5fa34f6c.png"},d5f6:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t._self._c;return e("div",[e("div",{attrs:{id:"reportPage"}},[e("div",{staticClass:"headerWrap"},[e("div",{staticClass:"oneTit"},[t._v("报表系统")]),t._l(t.tabList,(function(a,i){return e("div",{key:i,class:i==t.tabIndex?"active1":"",on:{click:function(e){return t.changOneTab(i)}}},[t._v(" "+t._s(a.name)+" ")])}))],2),e("div",{staticClass:"chooseWrap"},[e("div",{staticClass:"itemSearch"},[e("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyyMMdd","default-time":["00:00:00","23:59:59"],clearable:!1,disabled:t.isDjs},on:{blur:t.judgeTime},model:{value:t.search.time,callback:function(e){t.$set(t.search,"time",e)},expression:"search.time"}})],1),e("div",{staticClass:"itemSearch"},[e("el-radio-group",{on:{change:t.changeRadio},model:{value:t.search.radio,callback:function(e){t.$set(t.search,"radio",e)},expression:"search.radio"}},t._l(t.radioList,(function(a,i){return e("el-radio",{key:i,attrs:{disabled:t.isDjs,label:a.label}},[t._v(t._s(a.name))])})),1)],1),e("div",{staticClass:"itemSearch actionSearch"},[e("el-button",{staticStyle:{width:"75px",height:"32px",background:"#EF5557","border-color":"#EF5557"},attrs:{plain:"",size:"small",disabled:t.isDjs},on:{click:t.searchData}},[t._v("查询")]),e("el-button",{staticStyle:{width:"75px",height:"32px",background:"#23FF02","border-color":"#23FF02"},attrs:{disabled:t.isDjs,size:"small"},on:{click:t.restData}},[t._v("重置")])],1)]),e("div",{staticClass:"orderWrap"},[e("div",{staticClass:"twoTabList"},t._l(t.treeTabList,(function(a){return e("div",{key:a.marketId,staticClass:"twoItem",class:t.treeTabIndex==a.marketId?"twoActive":"",on:{click:function(e){return t.openThreeReport(a)}}},[t._v(t._s(a.accountName)+"流水")])})),0),e("div",{staticClass:"twoTabContent"},[e("threeAsset",{ref:"zjf",attrs:{"market-id":t.treeTabIndex,time:t.search.time,"is-search":t.isSearch}})],1)])])])},r=[],s=(a("5384"),a("84fa")),o={components:{threeAsset:s["a"]},data(){return{isLast:!1,isDjs:!1,tableData:{},protocolName:"param_tq_tradeQuery_exportOrderFront",fileName:"委托明细.xlsx",isSearch:!1,tabIndex:0,search:{time:null,radio:1},searchForm:{startTradeDay:null,endTradeDay:null,sort:[{direction:"DESC",property:"createTime"}]},exportTable:[],tabList:[{name:"资金报表"}],twoTabList:[{name:"委托明细",id:0},{name:"挂牌明细",id:1},{name:"持单汇总",id:2},{name:"持单明细",id:3},{name:"资金状况",id:4},{name:"交收挂牌查询",id:8}],treeTabList:window.g.APP_market,treeTabIndex:0,twoTabIndex:0,isChangTab:!1,radioList:[{label:0,name:"当前"},{label:1,name:"上日"},{label:2,name:"上周"},{label:4,name:"上月"},{label:5,name:"本月"}],beginTimeT:[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],beginZtime:[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)],currentDate:new Date,millisecond:864e5,fourTabIndex:0,fourTabList:[{name:"选货",id:0},{name:"铺货",id:1},{name:"铺货查询",id:2},{name:"配对查询",id:3}],reportTime:null}},watch:{isChangTab(t){t&&(this.isChangTab=!1,this.isDjs=!1,this.isLast=!1,this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),this.reportTime=setTimeout(()=>{this.tableData=this.$refs.zjf.$refs.tableData,this.protocolName="param_tq_exportFirmAccountFundsFlow",sessionStorage.setItem("marketId_w",0),this.fileName="资金系统流水.xlsx"},500))}},created(){window.g.isSupInfo&&(this.tabList=[{name:"资金报表"}]),this.search.time=this.beginTimeT,this.search.radio=0},mounted(){this.searchForm.startTradeDay=null,this.searchForm.endTradeDay=null},methods:{changOneTab(t){this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.tabIndex=t,this.isChangTab=!0},judgeTime(t){const e=this.formatTime(this.getLastWeek()),a=this.formatTime(this.getThisWeek()),i=this.formatTime(this.getLastMonth()),r=this.formatTime(this.getThisMonth()),s=t.value;this.beginTimeT[0]==s[0]&&this.beginTimeT[1]==s[1]?this.search.radio=0:this.beginZtime[0]==s[0]&&this.beginZtime[1]==s[1]?this.search.radio=1:e[0]==s[0]&&e[1]==s[1]?this.search.radio=2:a[0]==s[0]&&a[1]==s[1]?this.search.radio=3:i[0]==s[0]&&i[1]==s[1]?this.search.radio=4:r[0]==s[0]&&r[1]==s[1]?this.search.radio=5:this.search.radio=10},calcMoth(t,e){const a=t.slice(0,4)+"-"+t.slice(4,6)+"-"+t.slice(6,8),i=e.slice(0,4)+"-"+e.slice(4,6)+"-"+e.slice(6,8),r=new Date(a).getTime(),s=new Date(i).getTime(),o=26784e5;return Number(r)-Number(s)>o},searchData(){if(7!==this.twoTabIndex){if(this.calcMoth(this.search.time[1],this.search.time[0]))return this.$message("查询时间不能大于1个月");this.searchForm={starTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"occurTime"}]},0===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportOrderFront":1===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportTradeList":2===this.twoTabIndex?(this.searchForm.sort=[{direction:"DESC",property:"holdId"}],this.protocolName="param_tq_tradeQuery_exportHoldFront"):3===this.twoTabIndex?this.protocolName="param_tq_tradeQuery_exportHoldDetailList":5===this.twoTabIndex?(this.searchForm.sort=[{direction:"DESC",property:"tradeId"}],this.protocolName="param_tq_exportDeliveryStock"):4===this.twoTabIndex?(this.searchForm={startDate:this.search.time[0],endDate:this.search.time[1],sort:[{direction:"DESC",property:"trade_day"}]},this.protocolName="param_tq_exportUserReportOrderMargin"):8===this.twoTabIndex&&(this.isLast=!1,this.searchForm={startTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"deliveryId"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.kk.$refs.tableData,this.searchForm.startTime&&this.searchForm.endTime?this.protocolName="param_exportDeliveryFrontH":this.protocolName="param_getDeliveryExcel",this.fileName="交收挂牌.xlsx"},500)),this.protocolName="param_tq_exportFirmAccountFundsFlow",this.search.time[0]==this.beginTimeT[0]&&this.search.time[1]==this.beginTimeT[1]||(this.protocolName="param_tq_exportFirmAccountFundsFlowH"),this.isSearch=!0,setTimeout(()=>{this.isSearch=!1},1e3)}},restData(){this.search.time=this.beginTimeT,this.search.radio=0,this.isSearch=!1,this.isSearch=!0,setTimeout(()=>{this.isSearch=!1},1e3)},formatTime(t){const e=[];if(t.length>0)for(let a=0;a<t.length;a++){const i=t[a].replace(/-/g,"");e.push(i)}return e},getThisWeek:function(){var t=new Array,e=this.currentDate.getDay(),a=0!=e?e-1:6,i=new Date(this.currentDate.getTime()-a*this.millisecond);t.push(this.formatterDate(i));const r=util.dateDayFormate(Number(new Date));return t.push(r),t},getLastWeek:function(){var t=new Array,e=this.currentDate.getDay(),a=0!=e?e-1:6,i=new Date(this.currentDate.getTime()-this.millisecond*a),r=new Date(i.getTime()-this.millisecond),s=new Date(r.getTime()-6*this.millisecond);return t.push(this.formatterDate(s)),t.push(this.formatterDate(r)),t},getThisMonth:function(){var t=new Array,e=this.currentDate.getMonth(),a=this.currentDate.getFullYear(),i=new Date(a,e,1);11==e?(a++,e=0):e++;const r=util.dateDayFormate(Number(new Date));return t.push(this.formatterDate(i)),t.push(r),t},getLastMonth:function(){var t=new Array,e=this.currentDate.getMonth(),a=this.currentDate.getFullYear(),i=new Date(a,e,1);0==e?(e=11,a--):e--;var r=new Date(a,e,1),s=new Date(i.getTime()-this.millisecond);return t.push(this.formatterDate(r)),t.push(this.formatterDate(s)),t},formatterDate:function(t){var e=t.getFullYear()+"-"+(t.getMonth()+1>=10?t.getMonth()+1:"0"+(t.getMonth()+1))+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate());return e},changeRadio(t){switch(t){case 0:this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))];break;case 1:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)];break;case 2:this.search.time=this.formatTime(this.getLastWeek());break;case 3:this.search.time=this.formatTime(this.getThisWeek());break;case 4:this.search.time=this.formatTime(this.getLastMonth());break;case 5:this.search.time=this.formatTime(this.getThisMonth());break;case 6:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)];break;default:this.search.time=[util.formatnewDay(Number(new Date)-864e5),util.formatnewDay(Number(new Date)-864e5)]}},exportReport(){},openReport(t){this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.twoTabIndex=t,this.isDjs=!1,this.isLast=!1,this.searchForm={startTradeDay:0===this.search.radio?null:this.search.time[0],endTradeDay:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"createTime"}]},sessionStorage.setItem("marketId_w",28),this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),0==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.aa.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportOrderFront",this.fileName="委托明细.xlsx"},500):1==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.bb.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportTradeList",this.fileName="挂牌明细.xlsx"},500):2==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.cc.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"holdId"}],this.protocolName="param_tq_tradeQuery_exportHoldFront",this.fileName="持单汇总.xlsx"},500):3==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.dd.$refs.tableData,this.protocolName="param_tq_tradeQuery_exportHoldDetailList",this.fileName="持单明细.xlsx"},500):5==t?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ee.$refs.tableData,this.searchForm.sort=[{direction:"DESC",property:"tradeId"}],this.protocolName="param_tq_exportDeliveryStock",this.fileName="交收订货.xlsx"},500):4==t?(this.searchForm={startDate:this.search.time[0],endDate:this.search.time[1],sort:[{direction:"DESC",property:"trade_day"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.ff.$refs.tableData,this.protocolName="param_tq_exportUserReportOrderMargin",this.fileName="资金状况.xlsx"},500)):6==this.twoTabIndex?this.reportTime=setTimeout(()=>{this.tableData=this.$refs.gg.$refs.tableData,this.protocolName="param_exportDeliveryFrontH",this.fileName="到期交收.xlsx"},500):7==this.twoTabIndex?(this.isLast=!0,this.isDjs=!0):8==this.twoTabIndex?(this.isLast=!1,this.searchForm={startTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"deliveryId"}]},this.reportTime=setTimeout(()=>{this.tableData=this.$refs.kk.$refs.tableData,this.searchForm.startTime&&this.searchForm.endTime?this.protocolName="param_exportDeliveryFrontH":this.protocolName="param_getDeliveryExcel",this.fileName="交收挂牌.xlsx"},500)):this.isDjs=!0},openThreeReport(t){this.isDjs=!1,this.isLast=!1,this.search.radio=0,this.search.time=[util.formatnewDay(Number(new Date)),util.formatnewDay(Number(new Date))],this.treeTabIndex=t.marketId,this.searchForm={starTime:0===this.search.radio?null:this.search.time[0],endTime:0===this.search.radio?null:this.search.time[1],sort:[{direction:"DESC",property:"occurTime"}]},this.reportTime&&(clearTimeout(this.reportTime),this.reportTime=null),this.$nextTick(()=>[this.$refs.zjf.loadData()]),this.reportTime=setTimeout(()=>{this.tableData=this.$refs.zjf.$refs.tableData,this.protocolName="param_tq_exportFirmAccountFundsFlow",this.fileName=t.accountName+"流水.xlsx",sessionStorage.setItem("marketId_w",t.marketId)})},openDeilverReport(t){this.fourTabIndex=t,this.isLast=!0,this.isDjs=!0}}},h=o,n=(a("26e3"),a("71dc"),a("829d")),l=Object(n["a"])(h,i,r,!1,null,"82fc3cee",null);e["default"]=l.exports},dcc9:function(t,e,a){},de72:function(t,e,a){"use strict";a("dcc9")}}]);
//# sourceMappingURL=chunk-269dc73c.6fdb88be.js.map