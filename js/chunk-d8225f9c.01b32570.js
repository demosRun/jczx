(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8225f9c"],{"39e5":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"allFund"},[e("div",{staticClass:"contentWrap1"},[e("div",{staticClass:"topText"},[t._v("用户总资金结构图")]),e("TreeChart",{attrs:{"tree-data":t.fundData}})],1)])},n=[],c=(a("5384"),function(){var t=this,e=t._self._c;return t.treeData.accountName?e("table",[e("tr",[e("td",{class:{parentLevel:Array.isArray(t.treeData.children)&&t.treeData.children.length,extend:Array.isArray(t.treeData.children)&&t.treeData.children.length&&t.treeData.extend},attrs:{colspan:Array.isArray(t.treeData.children)?2*t.treeData.children.length:1}},[e("div",{class:{node:!0}},[e("div",{staticClass:"person",style:{backgroundColor:t.treeData.color},on:{click:function(e){return t.$emit("click-node",t.treeData)}}},[e("div",{staticClass:"name"},[t._v(t._s(t.treeData.accountName))]),e("div",{staticClass:"amonut"},[t._v(t._s(t.treeData.num))])])])])]),Array.isArray(t.treeData.children)&&t.treeData.children.length&&t.treeData.extend?e("tr",t._l(t.treeData.children,(function(a,r){return e("td",{key:r,staticClass:"childLevel",attrs:{colspan:"2"}},[e("TreeChart",{attrs:{"tree-data":a},on:{"click-node":function(e){return t.$emit("click-node",e)}}})],1)})),0):t._e()]):t._e()}),d=[],l={name:"TreeChart",props:["treeData"],mounted(){},methods:{}},s=l,i=(a("cae1"),a("829d")),o=Object(i["a"])(s,c,d,!1,null,"3024f523",null),u=o.exports,m={components:{TreeChart:u},data(){return{firmIds:[],fundData:{}}},mounted(){this.getAllFirmId()},methods:{getAllFirmId(){let t={accountName:"总资金",num:0,color:"#ef5557",children:[]};const e=JSON.parse(localStorage.getItem("FirmIdList_w")),a=window.g.APP_market;e.forEach(e=>{a.forEach(a=>{e.marketId==a.marketId&&(t.children.push({accountName:a.accountName,marketId:a.marketId,num:0,color:"#24df11",children:[{accountName:"可用资金",color:"#1c7df6",num:0},{accountName:"冻结资金",color:"#ff9705",num:0}]}),this.firmIds.push(e.firmId))})}),t=this.extendKey(t),this.getAllFund(t)},getAllFund(t){protocolTrans.param_mineAsset.param.firmIds=this.firmIds,http.postFront(protocolTrans.param_mineAsset).then(e=>{if(e.data&&e.data&&"0"==e.data.code){const a=e.data.value;t.num=0;const r=this;a.forEach(e=>{t.children.forEach((a,r)=>{Number(e.marketId)===Number(a.marketId)&&(28==e.marketId&&28==a.marketId&&Number(e.floatPl)<0?a.children[0].num=util.floatAdd(util.floatSub(e.balance,e.frozenFunds),e.floatPl):a.children[0].num=util.floatSub(e.balance,e.frozenFunds),a.children[1].num=e.frozenFunds,a.num=e.balance,t.num=util.floatAdd(a.num,t.num))})}),r.fundData=t}})},extendKey(t){return t.extend=void 0===t.extend||!!t.extend,Array.isArray(t.children)&&t.children.forEach(t=>{this.extendKey(t)}),t}}},h=m,f=(a("af96"),Object(i["a"])(h,r,n,!1,null,"e788489e",null));e["default"]=f.exports},6638:function(t,e,a){},af96:function(t,e,a){"use strict";a("ce2c")},cae1:function(t,e,a){"use strict";a("6638")},ce2c:function(t,e,a){}}]);
//# sourceMappingURL=chunk-d8225f9c.01b32570.js.map